<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Samba_ubuntu - 124c41</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" disabled>
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">124c41</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../resume/" class="nav-link">Resume</a>
                            </li>
                            <li class="nav-item">
                                <a href="../conda/" class="nav-link">Conda</a>
                            </li>
                            <li class="nav-item">
                                <a href="../venv/" class="nav-link">venv</a>
                            </li>
                            <li class="nav-item">
                                <a href="../poetry/" class="nav-link">poetry</a>
                            </li>
                            <li class="nav-item">
                                <a href="../git/" class="nav-link">git</a>
                            </li>
                            <li class="nav-item">
                                <a href="../ssh/" class="nav-link">ssh</a>
                            </li>
                            <li class="nav-item">
                                <a href="../softwarearchitecture/" class="nav-link">softwarearchitecture</a>
                            </li>
                            <li class="nav-item">
                                <a href="../code/" class="nav-link">vscode</a>
                            </li>
                            <li class="nav-item">
                                <a href="../machine_learning/" class="nav-link">machine_learning</a>
                            </li>
                            <li class="nav-item">
                                <a href="../llm/" class="nav-link">llm</a>
                            </li>
                            <li class="nav-item">
                                <a href="../embedding/" class="nav-link">embedding</a>
                            </li>
                            <li class="nav-item">
                                <a href="../llama2/" class="nav-link">llmama2</a>
                            </li>
                            <li class="nav-item">
                                <a href="../ollama/" class="nav-link">ollama</a>
                            </li>
                            <li class="nav-item">
                                <a href="../rag/" class="nav-link">rag</a>
                            </li>
                            <li class="nav-item">
                                <a href="../framework/" class="nav-link">Framework</a>
                            </li>
                            <li class="nav-item">
                                <a href="../db/" class="nav-link">database</a>
                            </li>
                            <li class="nav-item">
                                <a href="../dataframe/" class="nav-link">Dataframe</a>
                            </li>
                            <li class="nav-item">
                                <a href="../chart/" class="nav-link">Chart</a>
                            </li>
                            <li class="nav-item">
                                <a href="../anomaly_detection/" class="nav-link">anomaly_detection</a>
                            </li>
                            <li class="nav-item">
                                <a href="../hydra/" class="nav-link">Hydra</a>
                            </li>
                            <li class="nav-item">
                                <a href="../linux/" class="nav-link">Linux</a>
                            </li>
                            <li class="nav-item">
                                <a href="../docker/" class="nav-link">Docker</a>
                            </li>
                            <li class="nav-item">
                                <a href="../k8s/" class="nav-link">Kubernetes</a>
                            </li>
                            <li class="nav-item">
                                <a href="../ceph/" class="nav-link">ceph</a>
                            </li>
                            <li class="nav-item">
                                <a href="../macos/" class="nav-link">macos</a>
                            </li>
                            <li class="nav-item">
                                <a href="../sway/" class="nav-link">sway</a>
                            </li>
                            <li class="nav-item">
                                <a href="../mqtt/" class="nav-link">mqtt</a>
                            </li>
                            <li class="nav-item">
                                <a href="../jetson/" class="nav-link">jetson</a>
                            </li>
                            <li class="nav-item">
                                <a href="../yolox/" class="nav-link">yolox</a>
                            </li>
                            <li class="nav-item">
                                <a href="../gpt/" class="nav-link">gpt</a>
                            </li>
                            <li class="nav-item">
                                <a href="../stable_diffusion/" class="nav-link">stable_diffussion</a>
                            </li>
                            <li class="nav-item">
                                <a href="../wandb/" class="nav-link">Model Analysis</a>
                            </li>
                            <li class="nav-item">
                                <a href="../smb/" class="nav-link">Samba</a>
                            </li>
                            <li class="nav-item">
                                <a href="./" class="nav-link active" aria-current="page">Samba_ubuntu</a>
                            </li>
                            <li class="nav-item">
                                <a href="../mkdocs/" class="nav-link">MkDocs</a>
                            </li>
                            <li class="nav-item">
                                <a href="../mypy/" class="nav-link">mypy</a>
                            </li>
                            <li class="nav-item">
                                <a href="../literatures/" class="nav-link">Literatures</a>
                            </li>
                            <li class="nav-item">
                                <a href="../scrape_pad/" class="nav-link">scrape_pad</a>
                            </li>
                            <li class="nav-item">
                                <a href="../nes/" class="nav-link">nes</a>
                            </li>
                            <li class="nav-item">
                                <a href="../time_travel/" class="nav-link">time_travel</a>
                            </li>
                            <li class="nav-item">
                                <a href="../random/" class="nav-link">random</a>
                            </li>
                            <li class="nav-item">
                                <a href="../about/" class="nav-link">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../smb/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../mkdocs/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item dropdown">
                              <button id="theme-menu" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme" class="nav-link dropdown-toggle">
                                <i class="fa-solid fa-circle-half-stroke fa-fw"></i>
                                <span class="d-lg-none ms-2">Toggle theme</span>
                              </button>
                              <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                                    <i class="fa-solid fa-sun fa-fw"></i>
                                    <span class="ms-2">Light</span>
                                    <i class="fa-solid fa-check ms-auto d-none"></i>
                                  </button>
                                </li>
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                                    <i class="fa-solid fa-moon fa-fw"></i>
                                    <span class="ms-2">Dark</span>
                                    <i class="fa-solid fa-check ms-auto d-none"></i>
                                  </button>
                                </li>
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="auto" aria-pressed="true">
                                    <i class="fa-solid fa-circle-half-stroke fa-fw"></i>
                                    <span class="ms-2">Auto</span>
                                    <i class="fa-solid fa-check ms-auto"></i>
                                  </button>
                                </li>
                              </ul>
                            </li>
                    </ul>
                </div>
            </div>
        </div>
        <script src="../js/darkmode.js"></script>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#samba" class="nav-link">Samba</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#prerequisites" class="nav-link">Prerequisites</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#cifs-installation" class="nav-link">CIFS installation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#mounting-unprotected-guest-network-folders" class="nav-link">Mounting unprotected (guest) network folders</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#mount-password-protected-network-folders" class="nav-link">Mount password protected network folders</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#troubleshooting" class="nav-link">Troubleshooting</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#use-of-tilde-in-pathnames-such-as-credentialssmbcredentials" class="nav-link">\== Use of tilde in pathnames such as "credentials=\~/.smbcredentials"</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="samba">Samba</h1>
<p>This document describes how to mount CIFS shares permanently. The shares
might be hosted on a Windows computer/server, or on a Linux/UNIX server
running <a href="https://help.ubuntu.com/community/Samba" title="wikilink">Samba</a>.
This document also applies to SMBFS shares, which are similar to CIFS
but are deprecated and should be avoided if possible
(<a href="https://bugzilla.samba.org/show_bug.cgi?id=1920#c0" title="wikilink">link</a>).</p>
<p>(This document does <em>not</em> describe how to host the shares yourself, only
how to access shares that are hosted somewhere else. For hosting shares,
use <a href="https://help.ubuntu.com/community/Samba" title="wikilink">Samba</a>.)</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>We're assuming that:</p>
<p>- Network connections have been configured properly.
- Your local (Ubuntu) username is <code>ubuntuusername</code>.
- Share username on Windows computer is <code>msusername</code>.
- Share password on Windows computer is <code>mspassword</code>.
- The Windows computer's name is <code>servername</code> this can be either an IP address or an assigned name).
- The name of the share is <code>sharename</code>.
- You want to mount the share in <code>/media/windowsshare</code>.</p>
<h2 id="cifs-installation">CIFS installation</h2>
<p>On older systems:</p>
<h2 id="mounting-unprotected-guest-network-folders">Mounting unprotected (guest) network folders</h2>
<p>First, let's create the mount directory. You will need a separate
directory for each mount. </p>
<p>Then edit your /etc/fstab file (with root privileges) to add this line: </p>
<p>Where</p>
<p>- <strong>guest</strong> indicates you don't need a password to access the share,
- <strong>uid=1000</strong> makes the Linux user specified by the id the owner of the mounted share, allowing them to rename files,
- <strong>iocharset=utf8</strong> allows access to files with names in non-English languages. This doesn't work with shares of devices like the Buffalo Tera Station, or Windows machines that export their shares using ISO8895-15.
- If there is any <strong>space in the server path</strong>, you need to replace it by \040, for example //servername/My\040Documents`</p>
<p>After you add the entry to /etc/fstab type:  This will (re)mount all
entries listed in /etc/fstab.</p>
<h2 id="mount-password-protected-network-folders">Mount password protected network folders</h2>
<p>The quickest way to auto-mounting a password-protected share is to edit
/etc/fstab (with root privileges), to add this line: </p>
<p>This is not a good idea however: /etc/fstab is readable by everyone and
so is your Windows password in it. The way around this is to use a
credentials file. This is a file that contains just the username and
password.</p>
<p>Using a text editor, create a file for your remote servers logon
credential:</p>
<p>Enter your Windows username and password in the file:</p>
<p>Save the file, exit the editor.</p>
<p>Change the permissions of the file to prevent unwanted access to your
credentials:</p>
<p>Then edit your /etc/fstab file (with root privileges) to add this line
(replacing the insecure line in the example above, if you added it):</p>
<p>Save the file, exit the editor.</p>
<p>Finally, test the fstab entry by issuing:</p>
<p>If there are no errors, you should test how it works after a reboot.
Your remote share should mount automatically.</p>
<h3 id="special-permissions">Special permissions</h3>
<p>If you need special permission (like chmod etc.), you'll need to add a
<em>uid</em> (short for 'user id') or <em>gid</em> (for 'group id') parameter to the
share's mount options.</p>
<h3 id="mount-password-protected-shares-using-libpam_mount-ubuntu-904">Mount password protected shares using libpam_mount (Ubuntu 9.04)</h3>
<p>In addition to the initial assumptions, we're assuming that</p>
<p>- <strong>Your username and password are the same on the Ubuntu machine and on the network drive.</strong></p>
<p>Install libpam-mount: </p>
<p>Edit /etc/security/pam_mount.conf.xml using your preferred text editor.</p>
<p>First, we're moving the user specific config bits to a file which users
can actually edit themselves: remove the commenting tags ( ) surrounding
the section called <luserconf name=".pam_mount.conf.xml" />. Save the
file when done. With this in place, users can create their own
\~/.pam_mount.conf.xml.</p>
<p>Add the following:</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="login-errors">Login errors</h3>
<p>If you get the error "mount error(13) permission denied", then the
server denied your access. Here are the first things to check:</p>
<p>- Are you using a valid username and password? Does that account really have access to this folder?
- Do you have whitespace in your credentials file? It should be <code>, not</code>.
- Do you need a domain? For example, if you are told that your username is <code>, then actually your username is</code> and your domain is <code>. The fstab entry should read:</code> Or:
- The security and version settings are interrelated. SMB1 is insecure and no longer supported by default. At first, try to not specify either security or version: do not specify <code>or</code>. If you still have authentication errors then you may need to specify either <code>or</code> or both. You can try the options listed at the <code>[</code>mount.cifs<code></code>man<code></code>page<code>](http://manpages.ubuntu.com/manpages/raring/en/man8/mount.cifs.8.html "wikilink")</code>. The man page list leaves out the option <code>for some reason, but you should try that one as well (`[`see</code> 
 <code>`discussion</code>](https://bugs.launchpad.net/ubuntu/+source/cifs-utils/+bug/1113395 "wikilink")<code>).</code></p>
<h3 id="unprotected-network-folder-wont-automount">Unprotected network folder won't automount</h3>
<p>I've had a situation where an unprotected network folder wouldn't
automount during bootup, but after manually entering "sudo mount -a" was
mounted correctly. I solved this by replacing the "guest" option by
"username=guest,password=". If anyone has an explanation for this,
please leave a comment.</p>
<h3 id="mount-during-login-instead-of-boot">Mount during login instead of boot</h3>
<p>If for some reason/etc/rc0.d/S31umountnfs.sh (networking problems for
example) the automatic mounting during boot doesn't work, you can add
the "noauto" parameter to your smbfs fstab entry and then have the share
mounted at login.</p>
<p>In /etc/fstab: </p>
<p>In /etc/rc.local: </p>
<h3 id="slow-shutdown-due-to-a-cifsnetwork-manager-bug">Slow shutdown due to a CIFS/Network Manager bug</h3>
<p>If you use Network Manager, and are getting really slow shutdowns, it's
probably because NM shuts down before unmounting the network shares.
That will cause CIFS to hang and wait for 60 seconds or so. Here's how
to fix it:/etc/rc0.d/S31umountnfs.sh</p>
<p>Ubuntu 12.04 already runs <strong>umountnfs.sh</strong> at reboot and shutdown by
default (/etc/rc0.d/S31umountnfs.sh and /etc/rc6.d/S31umountnfs.sh) so
this is no longer necessary.</p>
<hr />
<h3 id="cifs-options-deprecated">CIFS Options Deprecated</h3>
<p>20 Feb 2008 TW</p>
<p>Using dmask or fmask in the fstab file produces the following warnings:
WARNING: CIFS mount option 'dmask' is deprecated. Use 'dir_mode'
instead. WARNING: CIFS mount option 'fmask' is deprecated. Use
'file_mode' instead.</p>
<p>Instead use this format: file_mode=0777,dir_mode=0777 . Or in some
cases you might need to use file_mode=0777,dir_mode=0777,nounix (<a href="http://superuser.com/a/410561" title="wikilink">see
discussion</a>)</p>
<hr />
<h1 id="use-of-tilde-in-pathnames-such-as-credentialssmbcredentials">\== Use of tilde in pathnames such as "credentials=\~/.smbcredentials"</h1>
<p>20 Feb 2008 TW</p>
<p>Curiously, using credentials=\~/.smbcredentials in fstab didn't work. I
had to use the full path, i.e. /home/username/.smbcredentials</p>
<p>(This is likely because the tilde "\~" is only a shell short-hand alias
for "$HOME"; it isn't something recognized system-wide by all programs,
especially not in a system file table where the concept of "HOME"
doesn't really exist. -Ian!)</p>
<hr />
<p>CategoryDocumentation</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
