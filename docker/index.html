<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Docker - 124c41</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Docker";
        var mkdocs_page_input_path = "docker.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> 124c41
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../resume/">Resume</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../conda/">Conda</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../venv/">venv</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../poetry/">poetry</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../git/">git</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ssh/">ssh</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../softwarearchitecture/">softwarearchitecture</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../code/">vscode</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../machine_learning/">machine_learning</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../llm/">llm</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../llama2/">llmama2</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ollama/">ollama</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../rag/">rag</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../framework/">Framework</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../db/">database</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../dataframe/">Dataframe</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../chart/">Chart</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../anomaly_detection/">anomaly_detection</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../hydra/">Hydra</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../linux/">Linux</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../macos/">macos</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../sway/">sway</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Docker</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#the-compose-specification">The Compose Specification</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#status-of-this-document">Status of this document</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#requirements-and-optional-attributes">Requirements and optional attributes</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#the-compose-application-model">The Compose application model</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#illustrative-example">Illustrative example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#compose-file">Compose file</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#version-and-name-top-level-elements">Version and name top-level elements</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#version-top-level-element">Version top-level element</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#name-top-level-element">Name top-level element</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#services-top-level-element">Services top-level element</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#attach">attach</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#build">build</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#blkio_config">blkio_config</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#device_read_bps-device_write_bps">device_read_bps, device_write_bps</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#device_read_iops-device_write_iops">device_read_iops, device_write_iops</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#weight">weight</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#weight_device">weight_device</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cpu_count">cpu_count</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cpu_percent">cpu_percent</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cpu_shares">cpu_shares</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cpu_period">cpu_period</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cpu_quota">cpu_quota</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cpu_rt_runtime">cpu_rt_runtime</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cpu_rt_period">cpu_rt_period</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cpus">cpus</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cpuset">cpuset</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cap_add">cap_add</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cap_drop">cap_drop</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cgroup">cgroup</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cgroup_parent">cgroup_parent</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#command">command</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#configs">configs</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#short-syntax">Short syntax</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#long-syntax">Long syntax</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#container_name">container_name</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#credential_spec">credential_spec</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#example-gmsa-configuration">Example gMSA configuration</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#depends_on">depends_on</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#short-syntax_1">Short syntax</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#long-syntax_1">Long syntax</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#deploy">deploy</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#develop">develop</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#device_cgroup_rules">device_cgroup_rules</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#devices">devices</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dns">dns</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dns_opt">dns_opt</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dns_search">dns_search</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#domainname">domainname</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#entrypoint">entrypoint</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#env_file">env_file</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#env_file-format">Env_file format</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#environment">environment</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#expose">expose</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#extends">extends</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#restrictions">Restrictions</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#finding-referenced-service">Finding referenced service</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#merging-service-definitions">Merging service definitions</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#annotations">annotations</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#external_links">external_links</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#extra_hosts">extra_hosts</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#short-syntax_2">Short syntax</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#long-syntax_2">Long syntax</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#group_add">group_add</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#healthcheck">healthcheck</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#hostname">hostname</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#image">image</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#init">init</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ipc">ipc</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#uts">uts</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#isolation">isolation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#labels">labels</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#links">links</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#logging">logging</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#network_mode">network_mode</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#networks">networks</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#aliases">aliases</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ipv4_address-ipv6_address">ipv4_address, ipv6_address</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#link_local_ips">link_local_ips</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#mac_address">mac_address</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#priority">priority</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#mac_address_1">mac_address</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#mem_limit">mem_limit</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#mem_reservation">mem_reservation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#mem_swappiness">mem_swappiness</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#memswap_limit">memswap_limit</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#oom_kill_disable">oom_kill_disable</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#oom_score_adj">oom_score_adj</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pid">pid</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pids_limit">pids_limit</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#platform">platform</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ports">ports</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#short-syntax_3">Short syntax</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#long-syntax_3">Long syntax</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#privileged">privileged</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#profiles">profiles</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pull_policy">pull_policy</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#read_only">read_only</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#restart">restart</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#runtime">runtime</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#scale">scale</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#secrets">secrets</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#short-syntax_4">Short syntax</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#long-syntax_4">Long syntax</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#security_opt">security_opt</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#shm_size">shm_size</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#stdin_open">stdin_open</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#stop_grace_period">stop_grace_period</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#stop_signal">stop_signal</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#storage_opt">storage_opt</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#sysctls">sysctls</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#tmpfs">tmpfs</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#tty">tty</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ulimits">ulimits</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#user">user</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#userns_mode">userns_mode</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#volumes">volumes</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#short-syntax_5">Short syntax</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#long-syntax_5">Long syntax</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#volumes_from">volumes_from</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#working_dir">working_dir</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#networks-top-level-element">Networks top-level element</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#basic-example">Basic example</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#advanced-example">Advanced example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#attributes">Attributes</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#driver">driver</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#driver_opts">driver_opts</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#attachable">attachable</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#enable_ipv6">enable_ipv6</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#external">external</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#ipam">ipam</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#internal">internal</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#labels_1">labels</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#name">name</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#volumes-top-level-element">Volumes top-level element</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example">Example</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#attributes_1">Attributes</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#driver_1">driver</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#driver_opts_1">driver_opts</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#external_1">external</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#labels_2">labels</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#name_1">name</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#configs-top-level-element">Configs top-level element</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-1">Example 1</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-2">Example 2</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-3">Example 3</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#secrets-top-level-element">Secrets top-level element</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-1_1">Example 1</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-2_1">Example 2</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-3_1">Example 3</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fragments">Fragments</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-1_2">Example 1</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-2_2">Example 2</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-3_2">Example 3</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-4">Example 4</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#extension">Extension</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-1_3">Example 1</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-2_3">Example 2</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-3_3">Example 3</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-4_1">Example 4</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#informative-historical-notes">Informative Historical Notes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#specifying-byte-values">Specifying byte values</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#specifying-durations">Specifying durations</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#interpolation">Interpolation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#merge-and-override">Merge and override</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#mapping">Mapping</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#sequence">Sequence</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#exceptions">Exceptions</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#shell-commands">Shell commands</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#unique-resources">Unique resources</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#reset-value">Reset value</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#replace-value">Replace value</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#include">Include</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#short-syntax_6">Short syntax</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#long-syntax_6">Long syntax</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#path">path</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#project_directory">project_directory</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#env_file_1">env_file</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#profiles_1">Profiles</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#illustrative-example_1">Illustrative example</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../mqtt/">mqtt</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../jetson/">jetson</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../yolox/">yolox</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../gpt/">gpt</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../stable_diffusion/">stable_diffussion</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../wandb/">Model Analysis</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../smb/">Samba</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../smb2/">Samba_ubuntu</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../mkdocs/">MkDocs</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../mypy/">mypy</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../literatures/">Literatures</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../scrape_pad/">scrape_pad</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../random/">random</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../about/">About</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">124c41</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Docker</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="docker">Docker</h1>
<pre><code class="language-sh">systemctl --user start docker-desktop
sudo groupadd docker
sudo usermod -aG docker $USER
groups ${USER}
</code></pre>
<pre><code class="language-sh">curl -fsSL test.docker.com -o get-docker.sh &amp;&amp; sh get-docker.sh
sudo apt-get install libffi-dev libssl-dev
sudo apt install python3-dev
sudo apt-get install -y python3 python3-pip
pip install &quot;cython&lt;3.0.0&quot; wheel
pip install &quot;pyyaml==5.4.1&quot; --no-build-isolation
pip install docker-compose
sudo systemctl enable docker
</code></pre>
<pre><code class="language-sh">sudo apt-get purge docker-ce
sudo apt-get purge docker-ce-cli
sudo rm -rf /var/lib/docker
</code></pre>
<!---
This file is generated, changes will be overwritten or CI specification check will fail
All changes should be done in the markdown files located in the spec directory
-->
<h2 id="the-compose-specification">The Compose Specification</h2>
<p>{:.no_toc}</p>
<ul>
<li>ToC
  {:toc}</li>
</ul>
<h2 id="status-of-this-document">Status of this document</h2>
<p>This document specifies the Compose file format used to define multi-containers applications. Distribution of this document is unlimited.</p>
<h3 id="requirements-and-optional-attributes">Requirements and optional attributes</h3>
<p>The Compose specification includes properties designed to target a local <a href="https://opencontainers.org/">OCI</a> container runtime,
exposing Linux kernel specific configuration options, but also some Windows container specific properties. It is also designed for cloud platform features related to resource placement on a cluster, replicated application distribution, and scalability.</p>
<p>We acknowledge that no Compose implementation is expected to support all attributes, and that support for some properties
is platform dependent and can only be confirmed at runtime. The definition of a versioned schema to control the supported
properties in a Compose file, established by the <a href="https://github.com/docker/compose">docker-compose</a> tool where the Compose
file format was designed, doesn't offer any guarantee to the end-user that attributes will be actually implemented.</p>
<p>The specification defines the expected configuration syntax and behavior. Unless noted, supporting any of these is optional.</p>
<p>A Compose implementation to parse a Compose file using unsupported attributes should warn users. We recommend the following implementors
to support those running modes:</p>
<ul>
<li>Default: warn the user about unsupported attributes, but ignore them</li>
<li>Strict: warn the user about unsupported attributes and reject the Compose file</li>
<li>Loose: ignore unsupported attributes AND unknown attributes (that were not defined by the spec by the time implementation was created)</li>
</ul>
<p>From this point onwards, references made to 'Compose' can be interpreted as 'a Compose implementation'. </p>
<h2 id="the-compose-application-model">The Compose application model</h2>
<p>The Compose Specification lets you define a platform-agnostic container based application. Such an application is designed as a set of containers which have to both run together with adequate shared resources and communication channels.</p>
<p>Computing components of an application are defined as <a href="05-services.md">services</a>. A service is an abstract concept implemented on platforms by running the same container image, and configuration, one or more times.</p>
<p>Services communicate with each other through <a href="06-networks.md">networks</a>. In the Compose Specification, a network is a platform capability abstraction to establish an IP route between containers within services connected together. Low-level, platform-specific networking options are grouped into the Network definition and may be partially implemented on some platforms.</p>
<p>Services store and share persistent data into <a href="07-volumes.md">volumes</a>. The Specification describes such a persistent data as a high-level filesystem mount with global options. Actual platform-specific implementation details are grouped into the volumes definition and may be partially implemented on some platforms.</p>
<p>Some services require configuration data that is dependent on the runtime or platform. For this, the Specification defines a dedicated <a href="08-configs.md">configs</a> concept. From a service container point of view, configs are comparable to volumes, in that they are files mounted into the container. But the actual definition involves distinct platform resources and services, which are abstracted by this type.</p>
<p>A <a href="09-secrets.md">secret</a> is a specific flavor of configuration data for sensitive data that should not be exposed without security considerations. Secrets are made available to services as files mounted into their containers, but the platform-specific resources to provide sensitive data are specific enough to deserve a distinct concept and definition within the Compose specification.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>With volumes, configs and secrets you can have a simple declaration at the top-level and then add more platform-specific information at the service level.</p>
</blockquote>
<p>A project is an individual deployment of an application specification on a platform. A project's name, set with the top-level <a href="04-version-and-name.md"><code>name</code></a> attribute, is used to group
resources together and isolate them from other applications or other installation of the same Compose specified application with distinct parameters. If you are creating resources on a platform, you must prefix resource names by project and
set the label <code>com.docker.compose.project</code>.</p>
<p>Compose offers a way for users to set a custom project name and override this name, so that the same <code>compose.yaml</code> file can be deployed twice on the same infrastructure, without changes, by just passing a distinct name.</p>
<p>Project names must contain only lowercase letters, decimal digits, dashes, and underscores, and must begin with a lowercase letter or decimal digit.</p>
<h3 id="illustrative-example">Illustrative example</h3>
<p>The following example illustrates the Compose Specification concepts outlined above. The example is non-normative.</p>
<p>Consider an application split into a frontend web application and a backend service.</p>
<p>The frontend is configured at runtime with an HTTP configuration file managed by infrastructure, providing an external domain name, and an HTTPS server certificate injected by the platform's secured secret store.</p>
<p>The backend stores data in a persistent volume.</p>
<p>Both services communicate with each other on an isolated back-tier network, while the frontend is also connected to a front-tier network and exposes port 443 for external usage.</p>
<pre><code class="language-mermaid">    %%{ init: { 'flowchart': { 'curve': 'linear' } } }%%
    flowchart LR
    subgraph A[INFRASTRUCTURE]
    direction TB
    subgraph TOP[&quot; &quot;]
        subgraph B1[Frontend Service]
            fs[&quot;`**webapp**`&quot;]
        end
        style B1 fill:#ccd6e8, stroke-width:0px
        subgraph B2[Backend Service]
            bs[&quot;`**database**`&quot;]
        end
        style B2 fill:#ccd6e8, stroke-width:0px

    end
    style TOP fill:transparent, stroke-width:2px, stroke:#62affb, stroke-dasharray: 5 5
        key[ro= read only\nr+w = read write]
        style key fill:transparent, stroke-width:0px,text-align: left, size: 94px

        direction TB
        id2(Server\nCertificate)
        id1(HTTP\nConfiguration)
        id1 &amp; id2 -.-|ro| B1
        style id1 stroke:#000,stroke-width:1px,stroke-dasharray: 10
        style id2 stroke:#000,stroke-width:1px,stroke-dasharray: 10
        B2 ==r+w==&gt; id3[(Persistent\nVolume)]
    end
    style A fill:#eeeeee, stroke-width:0px
    direction LR
    id4[External\nUser] ---id5(((443)))---&gt;|Frontend\nNetwork| B1
    style id4 stroke:#000,stroke-width:2px
    B1 --Backend\nNetwork--&gt; B2
</code></pre>
<p>The example application is composed of the following parts:</p>
<ul>
<li>2 services, backed by Docker images: <code>webapp</code> and <code>database</code></li>
<li>1 secret (HTTPS certificate), injected into the frontend</li>
<li>1 configuration (HTTP), injected into the frontend</li>
<li>1 persistent volume, attached to the backend</li>
<li>2 networks</li>
</ul>
<pre><code class="language-yml">services:
  frontend:
    image: example/webapp
    ports:
      - &quot;443:8043&quot;
    networks:
      - front-tier
      - back-tier
    configs:
      - httpd-config
    secrets:
      - server-certificate

  backend:
    image: example/database
    volumes:
      - db-data:/etc/data
    networks:
      - back-tier

volumes:
  db-data:
    driver: flocker
    driver_opts:
      size: &quot;10GiB&quot;

configs:
  httpd-config:
    external: true

secrets:
  server-certificate:
    external: true

networks:
  ## The presence of these objects is sufficient to define them
  front-tier: {}
  back-tier: {}
</code></pre>
<p>This example illustrates the distinction between volumes, configs and secrets. While all of them are all exposed
to service containers as mounted files or directories, only a volume can be configured for read+write access.
Secrets and configs are read-only. The volume configuration allows you to select a volume driver and pass driver options
to tweak volume management according to the actual infrastructure. Configs and secrets rely on platform services,
and are declared <code>external</code> as they are not managed as part of the application lifecycle. Compose uses a platform-specific lookup mechanism to retrieve runtime values.</p>
<h2 id="compose-file">Compose file</h2>
<p>The Compose file is a <a href="http://yaml.org/">YAML</a> file defining:
- <a href="04-version-and-name.md">Version</a> (Optional)
- <a href="05-services.md">Services</a> (Required)
- <a href="06-networks.md">Networks</a>
- <a href="07-volumes.md">Volumes</a>
- <a href="08-configs.md">Configs</a> 
- <a href="09-secrets.md">Secrets</a></p>
<p>The default path for a Compose file is <code>compose.yaml</code> (preferred) or <code>compose.yml</code> that is placed in the working directory.
Compose also supports <code>docker-compose.yaml</code> and <code>docker-compose.yml</code> for backwards compatibility of earlier versions.
If both files exist, Compose prefers the canonical <code>compose.yaml</code>.</p>
<p>You can use <a href="10-fragments.md">fragments</a> and <a href="11-extension.md">extensions</a> to keep your Compose file efficient and easy to maintain.</p>
<p>Multiple Compose files can be <a href="13-merge.md">merged</a> together to define the application model. The combination of YAML files are implemented by appending or overriding YAML elements based on the Compose file order you set. 
Simple attributes and maps get overridden by the highest order Compose file, lists get merged by appending. Relative
paths are resolved based on the first Compose file's parent folder, whenever complimentary files being
merged are hosted in other folders. As some Compose file elements can both be expressed as single strings or complex objects, merges apply to
the expanded form.</p>
<p>If you want to reuse other Compose files, or factor out parts of you application model into separate Compose files, you can also use <a href="14-include.md"><code>include</code></a>. This is useful if your Compose application is dependent on another application which is managed by a different team, or needs to be shared with others.</p>
<h2 id="version-and-name-top-level-elements">Version and name top-level elements</h2>
<h3 id="version-top-level-element">Version top-level element</h3>
<p>The top-level <code>version</code> property is defined by the Compose Specification for backward compatibility. It is only informative.</p>
<p>Compose doesn't use <code>version</code> to select an exact schema to validate the Compose file, but
prefers the most recent schema when it's implemented.</p>
<p>Compose validates whether it can fully parse the Compose file. If some fields are unknown, typically
because the Compose file was written with fields defined by a newer version of the Specification, you'll receive a warning message. Compose offers options to ignore unknown fields (as defined by <a href="01-status.md#requirements-and-optional-attributes">"loose"</a> mode).</p>
<h3 id="name-top-level-element">Name top-level element</h3>
<p>The top-level <code>name</code> property is defined by the Specification as the project name to be used if you don't set one explicitly.
Compose offers a way for you to override this name, and sets a
default project name to be used if the top-level <code>name</code> element is not set.</p>
<p>Whenever a project name is defined by top-level <code>name</code> or by some custom mechanism, it is exposed for
<a href="12-interpolation.md">interpolation</a> and environment variable resolution as <code>COMPOSE_PROJECT_NAME</code></p>
<pre><code class="language-yml">services:
  foo:
    image: busybox
    environment:
      - COMPOSE_PROJECT_NAME
    command: echo &quot;I'm running ${COMPOSE_PROJECT_NAME}&quot;
</code></pre>
<h2 id="services-top-level-element">Services top-level element</h2>
<p>A service is an abstract definition of a computing resource within an application which can be scaled or replaced
independently from other components. Services are backed by a set of containers, run by the platform
according to replication requirements and placement constraints. As services are backed by containers, they are defined
by a Docker image and set of runtime arguments. All containers within a service are identically created with these
arguments.</p>
<p>A Compose file must declare a <code>services</code> top-level element as a map whose keys are string representations of service names,
and whose values are service definitions. A service  definition contains the configuration that is applied to each
service container.</p>
<p>Each service may also include a <code>build</code> section, which defines how to create the Docker image for the service.
Compose supports building docker images using this service definition. If not used, the <code>build</code> section is ignored and the Compose file is still considered valid. Build support is an optional aspect of the Compose Specification, and is
described in detail in the <a href="build.md">Compose Build Specification</a> documentation.</p>
<p>Each service defines runtime constraints and requirements to run its containers. The <code>deploy</code> section groups
these constraints and allows the platform to adjust the deployment strategy to best match containers' needs with
available resources. Deploy support is an optional aspect of the Compose Specification, and is
described in detail in the <a href="deploy.md">Compose Deploy Specification</a> documentation.
If not implemented the <code>deploy</code> section is ignored and the Compose file is still considered valid.</p>
<h3 id="attach">attach</h3>
<p>When <code>attach</code> is defined and set to <code>false</code> Compose does not collect service logs,
until you explicitly request it to.</p>
<p>The default service configuration is <code>attach: true</code>.</p>
<h3 id="build">build</h3>
<p><code>build</code> specifies the build configuration for creating a container image from source, as defined in the <a href="build.md">Compose Build Specification</a>.</p>
<h3 id="blkio_config">blkio_config</h3>
<p><code>blkio_config</code> defines a set of configuration options to set block IO limits for a service.</p>
<pre><code class="language-yml">services:
  foo:
    image: busybox
    blkio_config:
       weight: 300
       weight_device:
         - path: /dev/sda
           weight: 400
       device_read_bps:
         - path: /dev/sdb
           rate: '12mb'
       device_read_iops:
         - path: /dev/sdb
           rate: 120
       device_write_bps:
         - path: /dev/sdb
           rate: '1024k'
       device_write_iops:
         - path: /dev/sdb
           rate: 30
</code></pre>
<h4 id="device_read_bps-device_write_bps">device_read_bps, device_write_bps</h4>
<p>Set a limit in bytes per second for read / write operations on a given device.
Each item in the list must have two keys:</p>
<ul>
<li><code>path</code>: Defines the symbolic path to the affected device.</li>
<li><code>rate</code>: Either as an integer value representing the number of bytes or as a string expressing a byte value.</li>
</ul>
<h4 id="device_read_iops-device_write_iops">device_read_iops, device_write_iops</h4>
<p>Set a limit in operations per second for read / write operations on a given device.
Each item in the list must have two keys:</p>
<ul>
<li><code>path</code>: Defines the symbolic path to the affected device.</li>
<li><code>rate</code>: As an integer value representing the permitted number of operations per second.</li>
</ul>
<h4 id="weight">weight</h4>
<p>Modify the proportion of bandwidth allocated to a service relative to other services.
Takes an integer value between 10 and 1000, with 500 being the default.</p>
<h4 id="weight_device">weight_device</h4>
<p>Fine-tune bandwidth allocation by device. Each item in the list must have two keys:</p>
<ul>
<li><code>path</code>: Defines the symbolic path to the affected device.</li>
<li><code>weight</code>: An integer value between 10 and 1000.</li>
</ul>
<h3 id="cpu_count">cpu_count</h3>
<p><code>cpu_count</code> defines the number of usable CPUs for service container.</p>
<h3 id="cpu_percent">cpu_percent</h3>
<p><code>cpu_percent</code> defines the usable percentage of the available CPUs.</p>
<h3 id="cpu_shares">cpu_shares</h3>
<p><code>cpu_shares</code> defines, as integer value, a service container's relative CPU weight versus other containers.</p>
<h3 id="cpu_period">cpu_period</h3>
<p><code>cpu_period</code> configures CPU CFS (Completely Fair Scheduler) period when a platform is based
on Linux kernel.</p>
<h3 id="cpu_quota">cpu_quota</h3>
<p><code>cpu_quota</code> configures CPU CFS (Completely Fair Scheduler) quota when a platform is based
on Linux kernel.</p>
<h3 id="cpu_rt_runtime">cpu_rt_runtime</h3>
<p><code>cpu_rt_runtime</code> configures CPU allocation parameters for platforms with support for realtime scheduler. It can be either
an integer value using microseconds as unit or a <a href="11-extension.md#specifying-durations">duration</a>.</p>
<pre><code class="language-yml"> cpu_rt_runtime: '400ms'
 cpu_rt_runtime: 95000`
</code></pre>
<h3 id="cpu_rt_period">cpu_rt_period</h3>
<p><code>cpu_rt_period</code> configures CPU allocation parameters for platforms with support for realtime scheduler. It can be either
an integer value using microseconds as unit or a <a href="11-extension.md#specifying-durations">duration</a>.</p>
<pre><code class="language-yml"> cpu_rt_period: '1400us'
 cpu_rt_period: 11000`
</code></pre>
<h3 id="cpus">cpus</h3>
<p><em>DEPRECATED: use <a href="deploy.md#cpus">deploy.limits.cpus</a></em></p>
<p><code>cpus</code> define the number of (potentially virtual) CPUs to allocate to service containers. This is a fractional number.
<code>0.000</code> means no limit.</p>
<h3 id="cpuset">cpuset</h3>
<p><code>cpuset</code> defines the explicit CPUs in which to allow execution. Can be a range <code>0-3</code> or a list <code>0,1</code></p>
<h3 id="cap_add">cap_add</h3>
<p><code>cap_add</code> specifies additional container <a href="https://man7.org/linux/man-pages/man7/capabilities.7.html">capabilities</a>
as strings.</p>
<pre><code class="language-yaml">cap_add:
  - ALL
</code></pre>
<h3 id="cap_drop">cap_drop</h3>
<p><code>cap_drop</code> specifies container <a href="https://man7.org/linux/man-pages/man7/capabilities.7.html">capabilities</a> to drop
as strings.</p>
<pre><code class="language-yaml">cap_drop:
  - NET_ADMIN
  - SYS_ADMIN
</code></pre>
<h3 id="cgroup">cgroup</h3>
<p><code>cgroup</code> specifies the cgroup namespace to join. When unset, it is the container runtime's decision to
select which cgroup namespace to use, if supported.</p>
<ul>
<li><code>host</code>: Runs the container in the Container runtime cgroup namespace.</li>
<li><code>private</code>: Runs the container in its own private cgroup namespace.</li>
</ul>
<h3 id="cgroup_parent">cgroup_parent</h3>
<p><code>cgroup_parent</code> specifies an optional parent <a href="https://man7.org/linux/man-pages/man7/cgroups.7.html">cgroup</a> for the container.</p>
<pre><code class="language-yaml">cgroup_parent: m-executor-abcd
</code></pre>
<h3 id="command">command</h3>
<p><code>command</code> overrides the default command declared by the container image, for example by Dockerfile's <code>CMD</code>.</p>
<pre><code class="language-yaml">command: bundle exec thin -p 3000
</code></pre>
<p>The value can also be a list, in a manner similar to <a href="https://docs.docker.com/engine/reference/builder/#cmd">Dockerfile</a>:</p>
<pre><code class="language-yaml">command: [ &quot;bundle&quot;, &quot;exec&quot;, &quot;thin&quot;, &quot;-p&quot;, &quot;3000&quot; ]
</code></pre>
<p>If the value is <code>null</code>, the default command from the image is used.</p>
<p>If the value is <code>[]</code> (empty list) or <code>''</code> (empty string), the default command declared by the image is ignored,
i.e. overridden to be empty.</p>
<h3 id="configs">configs</h3>
<p>Configs allow services to adapt their behaviour without the need to rebuild a Docker image. 
Services can only access configs when explicitly granted by the <code>configs</code> attribute. Two different syntax variants are supported.</p>
<p>Compose reports an error if <code>config</code> doesn't exist on the platform or isn't defined in the
<a href="08-configs.md"><code>configs</code> top-level element</a> in the Compose file.</p>
<p>There are two syntaxes defined for configs. To remain compliant to this specification, an implementation
must support both syntaxes. Implementations must allow use of both short and long syntaxes within the same document.</p>
<p>You can grant a service access to multiple configs, and you can mix long and short syntax.</p>
<h4 id="short-syntax">Short syntax</h4>
<p>The short syntax variant only specifies the config name. This grants the
container access to the config and mounts it as files into a services containers filesystem. The location of the mount point within the container defaults to <code>/&lt;config_name&gt;</code> in Linux containers, and <code>C:\&lt;config-name&gt;</code> in Windows containers. </p>
<p>The following example uses the short syntax to grant the <code>redis</code> service
access to the <code>my_config</code> and <code>my_other_config</code> configs. The value of
<code>my_config</code> is set to the contents of the file <code>./my_config.txt</code>, and
<code>my_other_config</code> is defined as an external resource, which means that it has
already been defined in the platform. If the external config does not exist,
the deployment fails.</p>
<pre><code class="language-yml">services:
  redis:
    image: redis:latest
    configs:
      - my_config
      - my_other_config
configs:
  my_config:
    file: ./my_config.txt
  my_other_config:
    external: true
</code></pre>
<h4 id="long-syntax">Long syntax</h4>
<p>The long syntax provides more granularity in how the config is created within the service's task containers.</p>
<ul>
<li><code>source</code>: The name of the config as it exists in the platform.</li>
<li><code>target</code>: The path and name of the file to be mounted in the service's
  task containers. Defaults to <code>/&lt;source&gt;</code> if not specified.</li>
<li><code>uid</code> and <code>gid</code>: The numeric UID or GID that owns the mounted config file
  within the service's task containers. Default value when not specified is USER running container.</li>
<li><code>mode</code>: The <a href="https://wintelguy.com/permissions-calc.pl">permissions</a> for the file that is mounted within the service's
  task containers, in octal notation. Default value is world-readable (<code>0444</code>).
  Writable bit must be ignored. The executable bit can be set.</li>
</ul>
<p>The following example sets the name of <code>my_config</code> to <code>redis_config</code> within the
container, sets the mode to <code>0440</code> (group-readable) and sets the user and group
to <code>103</code>. The <code>redis</code> service does not have access to the <code>my_other_config</code>
config.</p>
<pre><code class="language-yml">services:
  redis:
    image: redis:latest
    configs:
      - source: my_config
        target: /redis_config
        uid: &quot;103&quot;
        gid: &quot;103&quot;
        mode: 0440
configs:
  my_config:
    external: true
  my_other_config:
    external: true
</code></pre>
<h3 id="container_name">container_name</h3>
<p><code>container_name</code> is a string that specifies a custom container name, rather than a name generated by default.</p>
<pre><code class="language-yml">container_name: my-web-container
</code></pre>
<p>Compose does not scale a service beyond one container if the Compose file specifies a
<code>container_name</code>. Attempting to do so results in an error.</p>
<p><code>container_name</code> follows the regex format of <code>[a-zA-Z0-9][a-zA-Z0-9_.-]+</code></p>
<h3 id="credential_spec">credential_spec</h3>
<p><code>credential_spec</code> configures the credential spec for a managed service account.</p>
<p>If you have services that use Windows containers, you can use <code>file:</code> and
<code>registry:</code> protocols for <code>credential_spec</code>. Compose also supports additional
protocols for custom use-cases.</p>
<p>The <code>credential_spec</code> must be in the format <code>file://&lt;filename&gt;</code> or <code>registry://&lt;value-name&gt;</code>.</p>
<pre><code class="language-yml">credential_spec:
  file: my-credential-spec.json
</code></pre>
<p>When using <code>registry:</code>, the credential spec is read from the Windows registry on
the daemon's host. A registry value with the given name must be located in:</p>
<pre><code>HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Virtualization\Containers\CredentialSpecs
</code></pre>
<p>The following example loads the credential spec from a value named <code>my-credential-spec</code>
in the registry:</p>
<pre><code class="language-yml">credential_spec:
  registry: my-credential-spec
</code></pre>
<h4 id="example-gmsa-configuration">Example gMSA configuration</h4>
<p>When configuring a gMSA credential spec for a service, you only need
to specify a credential spec with <code>config</code>, as shown in the following example:</p>
<pre><code class="language-yml">services:
  myservice:
    image: myimage:latest
    credential_spec:
      config: my_credential_spec

configs:
  my_credentials_spec:
    file: ./my-credential-spec.json|
</code></pre>
<h3 id="depends_on">depends_on</h3>
<p><code>depends_on</code> expresses startup and shutdown dependencies between services.</p>
<h4 id="short-syntax_1">Short syntax</h4>
<p>The short syntax variant only specifies service names of the dependencies.
Service dependencies cause the following behaviors:</p>
<ul>
<li>
<p>Compose creates services in dependency order. In the following
  example, <code>db</code> and <code>redis</code> are created before <code>web</code>.</p>
</li>
<li>
<p>Compose removes services in dependency order. In the following
  example, <code>web</code> is removed before <code>db</code> and <code>redis</code>.</p>
</li>
</ul>
<p>Simple example:</p>
<pre><code class="language-yml">services:
  web:
    build: .
    depends_on:
      - db
      - redis
  redis:
    image: redis
  db:
    image: postgres
</code></pre>
<p>Compose guarantees dependency services have been started before
starting a dependent service.
Compose waits for dependency services to be "ready" before
starting a dependent service.</p>
<h4 id="long-syntax_1">Long syntax</h4>
<p>The long form syntax enables the configuration of additional fields that can't be
expressed in the short form.</p>
<ul>
<li>
<p><code>restart</code>: When set to <code>true</code> Compose restarts this service after it updates the dependency service.
  This applies to an explicit restart controlled by a Compose operation, and excludes automated restart by the container runtime
  after the container dies.</p>
</li>
<li>
<p><code>condition</code>: Sets the condition under which dependency is considered satisfied</p>
</li>
<li><code>service_started</code>: An equivalent of the short syntax described above</li>
<li><code>service_healthy</code>: Specifies that a dependency is expected to be "healthy"
    (as indicated by <a href="#healthcheck">healthcheck</a>) before starting a dependent
    service.</li>
<li><code>service_completed_successfully</code>: Specifies that a dependency is expected to run
    to successful completion before starting a dependent service.</li>
<li><code>required</code>: When set to <code>false</code> Compose only warns you when the dependency service isn't started or available. If it's not defined
    the default value of <code>required</code> is <code>true</code>.</li>
</ul>
<p>Service dependencies cause the following behaviors:</p>
<ul>
<li>
<p>Compose creates services in dependency order. In the following
  example, <code>db</code> and <code>redis</code> are created before <code>web</code>.</p>
</li>
<li>
<p>Compose waits for healthchecks to pass on dependencies
  marked with <code>service_healthy</code>. In the following example, <code>db</code> is expected to
  be "healthy" before <code>web</code> is created.</p>
</li>
<li>
<p>Compose removes services in dependency order. In the following
  example, <code>web</code> is removed before <code>db</code> and <code>redis</code>.</p>
</li>
</ul>
<pre><code class="language-yml">services:
  web:
    build: .
    depends_on:
      db:
        condition: service_healthy
        restart: true
      redis:
        condition: service_started
  redis:
    image: redis
  db:
    image: postgres
</code></pre>
<p>Compose guarantees dependency services are started before
starting a dependent service.
Compose guarantees dependency services marked with
<code>service_healthy</code> are "healthy" before starting a dependent service.</p>
<h3 id="deploy">deploy</h3>
<p><code>deploy</code> specifies the configuration for the deployment and lifecycle of services, as defined <a href="deploy.md">in the Compose Deploy Specification</a>.</p>
<h3 id="develop">develop</h3>
<p><code>develop</code> specifies the development configuration for maintaining a container in sync with source, as defined in the <a href="develop.md">Development Section</a>.</p>
<h3 id="device_cgroup_rules">device_cgroup_rules</h3>
<p><code>device_cgroup_rules</code> defines a list of device cgroup rules for this container.
The format is the same format the Linux kernel specifies in the <a href="https://www.kernel.org/doc/html/latest/admin-guide/cgroup-v1/devices.html">Control Groups
Device Whitelist Controller</a>.</p>
<pre><code class="language-yml">device_cgroup_rules:
  - 'c 1:3 mr'
  - 'a 7:* rmw'
</code></pre>
<h3 id="devices">devices</h3>
<p><code>devices</code> defines a list of device mappings for created containers in the form of
<code>HOST_PATH:CONTAINER_PATH[:CGROUP_PERMISSIONS]</code>.</p>
<pre><code class="language-yml">devices:
  - &quot;/dev/ttyUSB0:/dev/ttyUSB0&quot;
  - &quot;/dev/sda:/dev/xvda:rwm&quot;
</code></pre>
<h3 id="dns">dns</h3>
<p><code>dns</code> defines custom DNS servers to set on the container network interface configuration. It can be a single value or a list.</p>
<pre><code class="language-yml">dns: 8.8.8.8
</code></pre>
<pre><code class="language-yml">dns:
  - 8.8.8.8
  - 9.9.9.9
</code></pre>
<h3 id="dns_opt">dns_opt</h3>
<p><code>dns_opt</code> list custom DNS options to be passed to the containers DNS resolver (<code>/etc/resolv.conf</code> file on Linux).</p>
<pre><code class="language-yml">dns_opt:
  - use-vc
  - no-tld-query
</code></pre>
<h3 id="dns_search">dns_search</h3>
<p><code>dns_search</code> defines custom DNS search domains to set on container network interface configuration. It can be a single value or a list.</p>
<pre><code class="language-yml">dns_search: example.com
</code></pre>
<pre><code class="language-yml">dns_search:
  - dc1.example.com
  - dc2.example.com
</code></pre>
<h3 id="domainname">domainname</h3>
<p><code>domainname</code> declares a custom domain name to use for the service container. It must be a valid RFC 1123 hostname.</p>
<h3 id="entrypoint">entrypoint</h3>
<p><code>entrypoint</code> declares the default entrypoint for the service container.
This overrides the <code>ENTRYPOINT</code> instruction from the service's Dockerfile.</p>
<p>If <code>entrypoint</code> is non-null, Compose ignores any default command from the image, for example the <code>CMD</code>
instruction in the Dockerfile.</p>
<p>See also <a href="#command"><code>command</code></a> to set or override the default command to be executed by the entrypoint process.</p>
<p>In its short form, the value can be defined as a string:</p>
<pre><code class="language-yml">entrypoint: /code/entrypoint.sh
</code></pre>
<p>Alternatively, the value can also be a list, in a manner similar to the
<a href="https://docs.docker.com/engine/reference/builder/#cmd">Dockerfile</a>:</p>
<pre><code class="language-yml">entrypoint:
  - php
  - -d
  - zend_extension=/usr/local/lib/php/extensions/no-debug-non-zts-20100525/xdebug.so
  - -d
  - memory_limit=-1
  - vendor/bin/phpunit
</code></pre>
<p>If the value is <code>null</code>, the default entrypoint from the image is used.</p>
<p>If the value is <code>[]</code> (empty list) or <code>''</code> (empty string), the default entrypoint declared by the image is ignored,
i.e. overridden to be empty.</p>
<h3 id="env_file">env_file</h3>
<p><code>env_file</code> adds environment variables to the container based on the file content.</p>
<pre><code class="language-yml">env_file: .env
</code></pre>
<p><code>env_file</code> can also be a list. The files in the list are processed from the top down. For the same variable
specified in two env files, the value from the last file in the list stands.</p>
<pre><code class="language-yml">env_file:
  - ./a.env
  - ./b.env
</code></pre>
<p>List elements can also be declared as a mapping, which then lets you set an additional
attribute <code>required</code>. This defaults to <code>true</code>. When <code>required</code> is set to <code>false</code> and the <code>.env</code> file is missing,
Compose silently ignores the entry.</p>
<pre><code class="language-yml">env_file:
  - path: ./default.env
    required: true ## default
  - path: ./override.env
    required: false
</code></pre>
<p>Relative path are resolved from the Compose file's parent folder. As absolute paths prevent the Compose
file from being portable, Compose warns you when such a path is used to set <code>env_file</code>.</p>
<p>Environment variables declared in the <a href="#environment">environment</a> section override these values. This holds true even if those values are
empty or undefined.</p>
<h4 id="env_file-format">Env_file format</h4>
<p>Each line in an <code>.env</code> file must be in <code>VAR[=[VAL]]</code> format. The following syntax rules apply:</p>
<ul>
<li>Lines beginning with <code>#</code> are processed as comments and ignored.</li>
<li>Blank lines are ignored.</li>
<li>Unquoted and double-quoted (<code>"</code>) values have <a href="12-interpolation.md">Interpolation</a> applied.</li>
<li>Each line represents a key-value pair. Values can optionally be quoted.</li>
<li><code>VAR=VAL</code> -&gt; <code>VAL</code></li>
<li><code>VAR="VAL"</code> -&gt; <code>VAL</code></li>
<li><code>VAR='VAL'</code> -&gt; <code>VAL</code></li>
<li>Inline comments for unquoted values must be preceded with a space.</li>
<li><code>VAR=VAL ## comment</code> -&gt; <code>VAL</code></li>
<li><code>VAR=VAL## not a comment</code> -&gt; <code>VAL## not a comment</code></li>
<li>Inline comments for quoted values must follow the closing quote.</li>
<li><code>VAR="VAL ## not a comment"</code> -&gt; <code>VAL ## not a comment</code></li>
<li><code>VAR="VAL" ## comment</code> -&gt; <code>VAL</code></li>
<li>Single-quoted (<code>'</code>) values are used literally.</li>
<li><code>VAR='$OTHER'</code> -&gt; <code>$OTHER</code></li>
<li><code>VAR='${OTHER}'</code> -&gt; <code>${OTHER}</code></li>
<li>Quotes can be escaped with <code>\</code>.</li>
<li><code>VAR='Let\'s go!'</code> -&gt; <code>Let's go!</code></li>
<li><code>VAR="{\"hello\": \"json\"}"</code> -&gt; <code>{"hello": "json"}</code></li>
<li>Common shell escape sequences including <code>\n</code>, <code>\r</code>, <code>\t</code>, and <code>\\</code> are supported in double-quoted values.</li>
<li><code>VAR="some\tvalue"</code> -&gt; <code>some  value</code></li>
<li><code>VAR='some\tvalue'</code> -&gt; <code>some\tvalue</code></li>
<li><code>VAR=some\tvalue</code> -&gt; <code>some\tvalue</code></li>
</ul>
<p><code>VAL</code> may be omitted, in such cases the variable value is an empty string.
<code>=VAL</code> may be omitted, in such cases the variable is unset.</p>
<pre><code class="language-bash">## Set Rails/Rack environment
RACK_ENV=development
VAR=&quot;quoted&quot;
</code></pre>
<h3 id="environment">environment</h3>
<p><code>environment</code> defines environment variables set in the container. <code>environment</code> can use either an array or a
map. Any boolean values; true, false, yes, no, should be enclosed in quotes to ensure
they are not converted to True or False by the YAML parser.</p>
<p>Environment variables can be declared by a single key (no value to equals sign). In this case Compose
relies on you to resolve the value. If the value is not resolved, the variable
is unset and is removed from the service container environment.</p>
<p>Map syntax:</p>
<pre><code class="language-yml">environment:
  RACK_ENV: development
  SHOW: &quot;true&quot;
  USER_INPUT:
</code></pre>
<p>Array syntax:</p>
<pre><code class="language-yml">environment:
  - RACK_ENV=development
  - SHOW=true
  - USER_INPUT
</code></pre>
<p>When both <code>env_file</code> and <code>environment</code> are set for a service, values set by <code>environment</code> have precedence.</p>
<h3 id="expose">expose</h3>
<p><code>expose</code> defines the (incoming) port or a range of ports that Compose exposes from the container. These ports must be
accessible to linked services and should not be published to the host machine. Only the internal container
ports can be specified.</p>
<p>Syntax is <code>&lt;portnum&gt;/[&lt;proto&gt;]</code> or <code>&lt;startport-endport&gt;/[&lt;proto&gt;]</code> for a port range.
When not explicitly set, <code>tcp</code> protocol is used.</p>
<pre><code class="language-yml">expose:
  - &quot;3000&quot;
  - &quot;8000&quot;
  - &quot;8080-8085/tcp
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p>If the Dockerfile for the image already exposes ports, it is visible to other containers on the network even if <code>expose</code> is not set in your Compose file. </p>
</blockquote>
<h3 id="extends">extends</h3>
<p><code>extends</code> lets you share common configurations among different files, or even different projects entirely. With <code>extends</code> you can define a common set of service options in one place and refer to it from anywhere. You can refer to another Compose file and select a service you want to also use in your own application, with the ability to override some attributes for your own needs.</p>
<p>You can use <code>extends</code> on any service together with other configuration keys. The <code>extends</code> value must be a mapping
defined with a required <code>service</code> and an optional <code>file</code> key.</p>
<pre><code class="language-yaml">extends:
  file: common.yml
  service: webapp
</code></pre>
<ul>
<li><code>service</code>: Defines the name of the service being referenced as a base, for example <code>web</code> or <code>database</code>.</li>
<li><code>file</code>: The location of a Compose configuration file defining that service.</li>
</ul>
<h4 id="restrictions">Restrictions</h4>
<p>The following restrictions apply to the service being referenced:</p>
<ul>
<li>Services that have dependencies on other services cannot be used as a base. Therefore, any key
  that introduces a dependency on another service is incompatible with <code>extends</code>. The
  non-exhaustive list of such keys is: <code>links</code>, <code>volumes_from</code>, <code>container</code> mode (in <code>ipc</code>, <code>pid</code>,
  <code>network_mode</code> and <code>net</code>), <code>service</code> mode (in <code>ipc</code>, <code>pid</code> and <code>network_mode</code>), <code>depends_on</code>.</li>
<li>Services cannot have circular references with <code>extends</code>.</li>
</ul>
<p>Compose returns an error in all of these cases.</p>
<h4 id="finding-referenced-service">Finding referenced service</h4>
<p><code>file</code> value can be:</p>
<ul>
<li>Not present.
  This indicates that another service within the same Compose file is being referenced.</li>
<li>File path, which can be either:</li>
<li>Relative path. This path is considered as relative to the location of the main Compose
    file.</li>
<li>Absolute path.</li>
</ul>
<p>A service denoted by <code>service</code> must be present in the identified referenced Compose file.
Compose returns an error if:</p>
<ul>
<li>The service denoted by <code>service</code> is not found.</li>
<li>The Compose file denoted by <code>file</code> is not found.</li>
</ul>
<h4 id="merging-service-definitions">Merging service definitions</h4>
<p>Two service definitions, the main one in the current Compose file and the referenced one
specified by <code>extends</code>, are merged in the following way:</p>
<ul>
<li>Mappings: Keys in mappings of the main service definition override keys in mappings
  of the referenced service definition. Keys that aren't overridden are included as is.</li>
<li>Sequences: Items are combined together into a new sequence. The order of elements is
  preserved with the referenced items coming first and main items after.</li>
<li>Scalars: Keys in the main service definition take precedence over keys in the
  referenced one.</li>
</ul>
<h5 id="mappings">Mappings</h5>
<p>The following keys should be treated as mappings: <code>annotations</code>, <code>build.args</code>, <code>build.labels</code>,
<code>build.extra_hosts</code>, <code>deploy.labels</code>, <code>deploy.update_config</code>, <code>deploy.rollback_config</code>,
<code>deploy.restart_policy</code>, <code>deploy.resources.limits</code>, <code>environment</code>, <code>healthcheck</code>,
<code>labels</code>, <code>logging.options</code>, <code>sysctls</code>, <code>storage_opt</code>, <code>extra_hosts</code>, <code>ulimits</code>.</p>
<p>One exception that applies to <code>healthcheck</code> is that the main mapping cannot specify
<code>disable: true</code> unless the  referenced mapping also specifies <code>disable: true</code>. Compose returns an error in this case.</p>
<p>For example, the input below:</p>
<pre><code class="language-yaml">services:
  common:
    image: busybox
    environment:
      TZ: utc
      PORT: 80
  cli:
    extends:
      service: common
    environment:
      PORT: 8080
</code></pre>
<p>Produces the following configuration for the <code>cli</code> service. The same output is
produced if array syntax is used.</p>
<pre><code class="language-yaml">environment:
  PORT: 8080
  TZ: utc
image: busybox
</code></pre>
<p>Items under <code>blkio_config.device_read_bps</code>, <code>blkio_config.device_read_iops</code>,
<code>blkio_config.device_write_bps</code>, <code>blkio_config.device_write_iops</code>, <code>devices</code> and
<code>volumes</code> are also treated as mappings where key is the target path inside the
container.</p>
<p>For example, the input below:</p>
<pre><code class="language-yaml">services:
  common:
    image: busybox
    volumes:
      - common-volume:/var/lib/backup/data:rw
  cli:
    extends:
      service: common
    volumes:
      - cli-volume:/var/lib/backup/data:ro
</code></pre>
<p>Produces the following configuration for the <code>cli</code> service. Note that the mounted path
now points to the new volume name and <code>ro</code> flag was applied.</p>
<pre><code class="language-yaml">image: busybox
volumes:
- cli-volume:/var/lib/backup/data:ro
</code></pre>
<p>If the referenced service definition contains <code>extends</code> mapping, the items under it
are simply copied into the new merged definition. The merging process is then kicked
off again until no <code>extends</code> keys are remaining.</p>
<p>For example, the input below:</p>
<pre><code class="language-yaml">services:
  base:
    image: busybox
    user: root
  common:
    image: busybox
    extends:
      service: base
  cli:
    extends:
      service: common
</code></pre>
<p>Produces the following configuration for the <code>cli</code> service. Here, <code>cli</code> services
gets <code>user</code> key from <code>common</code> service, which in turn gets this key from <code>base</code>
service.</p>
<pre><code class="language-yaml">image: busybox
user: root
</code></pre>
<h5 id="sequences">Sequences</h5>
<p>The following keys should be treated as sequences: <code>cap_add</code>, <code>cap_drop</code>, <code>configs</code>,
<code>deploy.placement.constraints</code>, <code>deploy.placement.preferences</code>,
<code>deploy.reservations.generic_resources</code>, <code>device_cgroup_rules</code>, <code>expose</code>,
<code>external_links</code>, <code>ports</code>, <code>secrets</code>, <code>security_opt</code>.
Any duplicates resulting from the merge are removed so that the sequence only
contains unique elements.</p>
<p>For example, the input below:</p>
<pre><code class="language-yaml">services:
  common:
    image: busybox
    security_opt:
      - label:role:ROLE
  cli:
    extends:
      service: common
    security_opt:
      - label:user:USER
</code></pre>
<p>Produces the following configuration for the <code>cli</code> service.</p>
<pre><code class="language-yaml">image: busybox
security_opt:
- label:role:ROLE
- label:user:USER
</code></pre>
<p>In case list syntax is used, the following keys should also be treated as sequences:
<code>dns</code>, <code>dns_search</code>, <code>env_file</code>, <code>tmpfs</code>. Unlike sequence fields mentioned above,
duplicates resulting from the merge are not removed.</p>
<h5 id="scalars">Scalars</h5>
<p>Any other allowed keys in the service definition should be treated as scalars.</p>
<h3 id="annotations">annotations</h3>
<p><code>annotations</code> defines annotations for the container. <code>annotations</code> can use either an array or a map.</p>
<pre><code class="language-yml">annotations:
  com.example.foo: bar
</code></pre>
<pre><code class="language-yml">annotations:
  - com.example.foo=bar
</code></pre>
<h3 id="external_links">external_links</h3>
<p><code>external_links</code> link service containers to services managed outside of your Compose application.
<code>external_links</code> define the name of an existing service to retrieve using the platform lookup mechanism.
An alias of the form <code>SERVICE:ALIAS</code> can be specified.</p>
<pre><code class="language-yml">external_links:
  - redis
  - database:mysql
  - database:postgresql
</code></pre>
<h3 id="extra_hosts">extra_hosts</h3>
<p><code>extra_hosts</code> adds hostname mappings to the container network interface configuration (<code>/etc/hosts</code> for Linux).</p>
<h4 id="short-syntax_2">Short syntax</h4>
<p>Short syntax uses plain strings in a list. Values must set hostname and IP address for additional hosts in the form of <code>HOSTNAME=IP</code>.</p>
<pre><code class="language-yml">extra_hosts:
  - &quot;somehost=162.242.195.82&quot;
  - &quot;otherhost=50.31.209.229&quot;
  - &quot;myhostv6=::1&quot;
</code></pre>
<p>IPv6 addresses can be enclosed in square brackets, for example:</p>
<pre><code class="language-yml">extra_hosts:
  - &quot;myhostv6=[::1]&quot;
</code></pre>
<p>The separator <code>=</code> is preferred, but <code>:</code> can also be used. For example:</p>
<pre><code class="language-yml">extra_hosts:
  - &quot;somehost:162.242.195.82&quot;
  - &quot;myhostv6:::1&quot;
</code></pre>
<h4 id="long-syntax_2">Long syntax</h4>
<p>Alternatively, <code>extra_hosts</code> can be set as a mapping between hostname(s) and IP(s)</p>
<pre><code class="language-yml">extra_hosts:
  somehost: &quot;162.242.195.82&quot;
  otherhost: &quot;50.31.209.229&quot;
  myhostv6: &quot;::1&quot;
</code></pre>
<p>Compose creates a matching entry with the IP address and hostname in the container's network
configuration, which means for Linux <code>/etc/hosts</code> get extra lines:</p>
<pre><code>162.242.195.82  somehost
50.31.209.229   otherhost
::1             myhostv6
</code></pre>
<h3 id="group_add">group_add</h3>
<p><code>group_add</code> specifies additional groups, by name or number, which the user inside the container must be a member of.</p>
<p>An example of where this is useful is when multiple containers (running as different users) need to all read or write
the same file on a shared volume. That file can be owned by a group shared by all the containers, and specified in
<code>group_add</code>.</p>
<pre><code class="language-yml">services:
  myservice:
    image: alpine
    group_add:
      - mail
</code></pre>
<p>Running <code>id</code> inside the created container must show that the user belongs to the <code>mail</code> group, which would not have
been the case if <code>group_add</code> were not declared.</p>
<h3 id="healthcheck">healthcheck</h3>
<p><code>healthcheck</code> declares a check that's run to determine whether or not the service containers are "healthy". It works in the same way, and has the same default values, as the
<a href="https://docs.docker.com/engine/reference/builder/#healthcheck">HEALTHCHECK Dockerfile instruction</a>
set by the service's Docker image. Your Compose file can override the values set in the Dockerfile. </p>
<pre><code class="language-yml">healthcheck:
  test: [&quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost&quot;]
  interval: 1m30s
  timeout: 10s
  retries: 3
  start_period: 40s
  start_interval: 5s
</code></pre>
<p><code>interval</code>, <code>timeout</code>, <code>start_period</code>, and <code>start_interval</code> are <a href="11-extension.md#specifying-durations">specified as durations</a>.</p>
<p><code>test</code> defines the command Compose runs to check container health. It can be
either a string or a list. If it's a list, the first item must be either <code>NONE</code>, <code>CMD</code> or <code>CMD-SHELL</code>.
If it's a string, it's equivalent to specifying <code>CMD-SHELL</code> followed by that string.</p>
<pre><code class="language-yml">## Hit the local web app
test: [&quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost&quot;]
</code></pre>
<p>Using <code>CMD-SHELL</code> runs the command configured as a string using the container's default shell
(<code>/bin/sh</code> for Linux). Both forms below are equivalent:</p>
<pre><code class="language-yml">test: [&quot;CMD-SHELL&quot;, &quot;curl -f http://localhost || exit 1&quot;]
</code></pre>
<pre><code class="language-yml">test: curl -f https://localhost || exit 1
</code></pre>
<p><code>NONE</code> disables the healthcheck, and is mostly useful to disable the Healthcheck Dockerfile instruction set by the service's Docker image. Alternatively,
the healthcheck set by the image can be disabled by setting <code>disable: true</code>:</p>
<pre><code class="language-yml">healthcheck:
  disable: true
</code></pre>
<h3 id="hostname">hostname</h3>
<p><code>hostname</code> declares a custom host name to use for the service container. It must be a valid RFC 1123 hostname.</p>
<h3 id="image">image</h3>
<p><code>image</code> specifies the image to start the container from. <code>image</code> must follow the Open Container Specification
<a href="https://github.com/opencontainers/org/blob/master/docs/docs/introduction/digests.md">addressable image format</a>,
as <code>[&lt;registry&gt;/][&lt;project&gt;/]&lt;image&gt;[:&lt;tag&gt;|@&lt;digest&gt;]</code>.</p>
<pre><code class="language-yml">    image: redis
    image: redis:5
    image: redis@sha256:0ed5d5928d4737458944eb604cc8509e245c3e19d02ad83935398bc4b991aac7
    image: library/redis
    image: docker.io/library/redis
    image: my_private.registry:5000/redis
</code></pre>
<p>If the image does not exist on the platform, Compose attempts to pull it based on the <code>pull_policy</code>.
If you are also using the <a href="build.md">Compose Build Specification</a>, there are alternative options for controlling the precedence of
pull over building the image from source, however pulling the image is the default behavior.</p>
<p><code>image</code> may be omitted from a Compose file as long as a <code>build</code> section is declared. If you are not using the Compose Build Specification, Compose won't work if <code>image</code> is missing from the Compose file.</p>
<h3 id="init">init</h3>
<p><code>init</code> runs an init process (PID 1) inside the container that forwards signals and reaps processes.
Set this option to <code>true</code> to enable this feature for the service.</p>
<pre><code class="language-yml">services:
  web:
    image: alpine:latest
    init: true
</code></pre>
<p>The init binary that is used is platform specific.</p>
<h3 id="ipc">ipc</h3>
<p><code>ipc</code> configures the IPC isolation mode set by the service container. Available
values are platform specific, but Compose defines specific values
which must be implemented as described if supported:</p>
<ul>
<li><code>shareable</code>: Gives the container its own private IPC namespace, with a
  possibility to share it with other containers.</li>
<li><code>service:{name}</code>: Makes the container join another container's
  (<code>shareable</code>) IPC namespace.</li>
</ul>
<pre><code class="language-yml">    ipc: &quot;shareable&quot;
    ipc: &quot;service:[service name]&quot;
</code></pre>
<h3 id="uts">uts</h3>
<p><code>uts</code> configures the UTS namespace mode set for the service container. When unspecified
it is the runtime's decision to assign a UTS namespace, if supported. Available values are:</p>
<ul>
<li><code>'host'</code>: Results in the container using the same UTS namespace as the host.</li>
</ul>
<pre><code class="language-yml">    uts: &quot;host&quot;
</code></pre>
<h3 id="isolation">isolation</h3>
<p><code>isolation</code> specifies a containers isolation technology. Supported values are platform specific.</p>
<h3 id="labels">labels</h3>
<p><code>labels</code> add metadata to containers. You can use either an array or a map.</p>
<p>It's recommended that you use reverse-DNS notation to prevent your labels from conflicting with
those used by other software.</p>
<pre><code class="language-yml">labels:
  com.example.description: &quot;Accounting webapp&quot;
  com.example.department: &quot;Finance&quot;
  com.example.label-with-empty-value: &quot;&quot;
</code></pre>
<pre><code class="language-yml">labels:
  - &quot;com.example.description=Accounting webapp&quot;
  - &quot;com.example.department=Finance&quot;
  - &quot;com.example.label-with-empty-value&quot;
</code></pre>
<p>Compose creates containers with canonical labels:</p>
<ul>
<li><code>com.docker.compose.project</code> set on all resources created by Compose to the user project name</li>
<li><code>com.docker.compose.service</code> set on service containers with service name as defined in the Compose file</li>
</ul>
<p>The <code>com.docker.compose</code> label prefix is reserved. Specifying labels with this prefix in the Compose file
results in a runtime error.</p>
<h3 id="links">links</h3>
<blockquote>
<p><strong>Note</strong></p>
<p>Availability of the <code>links</code> attribute is implementation specific.</p>
</blockquote>
<p><code>links</code> defines a network link to containers in another service. Either specify both the service name and
a link alias (<code>SERVICE:ALIAS</code>), or just the service name.</p>
<pre><code class="language-yml">web:
  links:
    - db
    - db:database
    - redis
</code></pre>
<p>Containers for the linked service are reachable at a hostname identical to the alias, or the service name
if no alias is specified.</p>
<p>Links are not required to enable services to communicate. When no specific network configuration is set,
any service is able to reach any other service at that services name on the <code>default</code> network. If services
do declare networks they are attached to, <code>links</code> does not override the network configuration and services not
attached to a shared network are not be able to communicate. Compose doesn't warn you about a configuration mismatch.</p>
<p>Links also express implicit dependency between services in the same way as
<a href="#depends_on">depends_on</a>, so they determine the order of service startup.</p>
<h3 id="logging">logging</h3>
<p><code>logging</code> defines the logging configuration for the service.</p>
<pre><code class="language-yml">logging:
  driver: syslog
  options:
    syslog-address: &quot;tcp://192.168.0.42:123&quot;
</code></pre>
<p>The <code>driver</code> name specifies a logging driver for the service's containers. The default and available values
are platform specific. Driver specific options can be set with <code>options</code> as key-value pairs.</p>
<h3 id="network_mode">network_mode</h3>
<p><code>network_mode</code> sets a service container's network mode. Available values are platform specific, but Compose defines specific values which must be implemented as described if supported:</p>
<ul>
<li><code>none</code>: Turns off all container networking.</li>
<li><code>host</code>: Gives the container raw access to the host's network interface.</li>
<li><code>service:{name}</code>: Gives the containers access to the specified service only.</li>
</ul>
<pre><code class="language-yml">    network_mode: &quot;host&quot;
    network_mode: &quot;none&quot;
    network_mode: &quot;service:[service name]&quot;
</code></pre>
<p>When set, the <a href="#networks"><code>networks</code></a> attribute is not allowed and Compose rejects any
Compose file containing both attributes.</p>
<h3 id="networks">networks</h3>
<p><code>networks</code> defines the networks that service containers are attached to, referencing entries under the
<a href="06-networks.md">top-level <code>networks</code> key</a>.</p>
<pre><code class="language-yml">services:
  some-service:
    networks:
      - some-network
      - other-network
</code></pre>
<h4 id="aliases">aliases</h4>
<p><code>aliases</code> declares alternative hostnames for the service on the network. Other containers on the same
network can use either the service name or an alias to connect to one of the service's containers.</p>
<p>Since <code>aliases</code> are network-scoped, the same service can have different aliases on different networks.</p>
<blockquote>
<p><strong>Note</strong>
A network-wide alias can be shared by multiple containers, and even by multiple services.
If it is, then exactly which container the name resolves to is not guaranteed.</p>
</blockquote>
<pre><code class="language-yml">services:
  some-service:
    networks:
      some-network:
        aliases:
          - alias1
          - alias3
      other-network:
        aliases:
          - alias2
</code></pre>
<p>In the following example, service <code>frontend</code> is able to reach the <code>backend</code> service at
the hostname <code>backend</code> or <code>database</code> on the <code>back-tier</code> network. The service <code>monitoring</code>
is able to reach same <code>backend</code> service at <code>backend</code> or <code>mysql</code> on the <code>admin</code> network.</p>
<pre><code class="language-yml">services:
  frontend:
    image: example/webapp
    networks:
      - front-tier
      - back-tier

  monitoring:
    image: example/monitoring
    networks:
      - admin

  backend:
    image: example/backend
    networks:
      back-tier:
        aliases:
          - database
      admin:
        aliases:
          - mysql

networks:
  front-tier:
  back-tier:
  admin:
</code></pre>
<h4 id="ipv4_address-ipv6_address">ipv4_address, ipv6_address</h4>
<p>Specify a static IP address for a service container when joining the network.</p>
<p>The corresponding network configuration in the <a href="06-networks.md">top-level networks section</a> must have an
<code>ipam</code> attribute with subnet configurations covering each static address.</p>
<pre><code class="language-yml">services:
  frontend:
    image: example/webapp
    networks:
      front-tier:
        ipv4_address: 172.16.238.10
        ipv6_address: 2001:3984:3989::10

networks:
  front-tier:
    ipam:
      driver: default
      config:
        - subnet: &quot;172.16.238.0/24&quot;
        - subnet: &quot;2001:3984:3989::/64&quot;
</code></pre>
<h4 id="link_local_ips">link_local_ips</h4>
<p><code>link_local_ips</code> specifies a list of link-local IPs. Link-local IPs are special IPs which belong to a well
known subnet and are purely managed by the operator, usually dependent on the architecture where they are
deployed. Implementation is platform specific.</p>
<p>Example:</p>
<pre><code class="language-yaml">services:
  app:
    image: busybox
    command: top
    networks:
      app_net:
        link_local_ips:
          - 57.123.22.11
          - 57.123.22.13
networks:
  app_net:
    driver: bridge
</code></pre>
<h4 id="mac_address">mac_address</h4>
<p><code>mac_address</code> sets the MAC address used by the service container when connecting to this particular network.</p>
<h4 id="priority">priority</h4>
<p><code>priority</code> indicates in which order Compose connects the services containers to its
networks. If unspecified, the default value is 0.</p>
<p>In the following example, the app service connects to <code>app_net_1</code> first as it has the highest priority. It then connects to <code>app_net_3</code>, then <code>app_net_2</code>, which uses the default priority value of 0.</p>
<pre><code class="language-yaml">services:
  app:
    image: busybox
    command: top
    networks:
      app_net_1:
        priority: 1000
      app_net_2:

      app_net_3:
        priority: 100
networks:
  app_net_1:
  app_net_2:
  app_net_3:
</code></pre>
<h3 id="mac_address_1">mac_address</h3>
<p><code>mac_address</code> sets a MAC address for the service container.</p>
<blockquote>
<p><strong>Note</strong>
Container runtimes might reject this value (ie. Docker Engine &gt;= v25.0). In that case, you should use <a href="#mac_address">networks.mac_address</a> instead.</p>
</blockquote>
<h3 id="mem_limit">mem_limit</h3>
<p><em>DEPRECATED: use <a href="deploy.md#memory">deploy.limits.memory</a></em></p>
<h3 id="mem_reservation">mem_reservation</h3>
<p><em>DEPRECATED: use <a href="deploy.md#memory">deploy.reservations.memory</a></em></p>
<h3 id="mem_swappiness">mem_swappiness</h3>
<p><code>mem_swappiness</code> defines as a percentage, a value between 0 and 100, for the host kernel to swap out
anonymous memory pages used by a container.</p>
<ul>
<li><code>0</code>: Turns off anonymous page swapping.</li>
<li><code>100</code>: Sets all anonymous pages as swappable.</li>
</ul>
<p>The default value is platform specific.</p>
<h3 id="memswap_limit">memswap_limit</h3>
<p><code>memswap_limit</code> defines the amount of memory the container is allowed to swap to disk. This is a modifier
attribute that only has meaning if <a href="deploy.md#memory"><code>memory</code></a> is also set. Using swap lets the container write excess
memory requirements to disk when the container has exhausted all the memory that is available to it.
There is a performance penalty for applications that swap memory to disk often.</p>
<ul>
<li>If <code>memswap_limit</code> is set to a positive integer, then both <code>memory</code> and <code>memswap_limit</code> must be set. <code>memswap_limit</code> represents the total amount of memory and swap that can be used, and <code>memory</code> controls the amount used by non-swap memory. So if <code>memory</code>="300m" and <code>memswap_limit</code>="1g", the container can use 300m of memory and 700m (1g - 300m) swap.</li>
<li>If <code>memswap_limit</code> is set to 0, the setting is ignored, and the value is treated as unset.</li>
<li>If <code>memswap_limit</code> is set to the same value as <code>memory</code>, and <code>memory</code> is set to a positive integer, the container does not have access to swap.</li>
<li>If <code>memswap_limit</code> is unset, and <code>memory</code> is set, the container can use as much swap as the <code>memory</code> setting, if the host container has swap memory configured. For instance, if <code>memory</code>="300m" and <code>memswap_limit</code> is not set, the container can use 600m in total of memory and swap.</li>
<li>If <code>memswap_limit</code> is explicitly set to -1, the container is allowed to use unlimited swap, up to the amount available on the host system.</li>
</ul>
<h3 id="oom_kill_disable">oom_kill_disable</h3>
<p>If <code>oom_kill_disable</code> is set, Compose configures the platform so it won't kill the container in case
of memory starvation.</p>
<h3 id="oom_score_adj">oom_score_adj</h3>
<p><code>oom_score_adj</code> tunes the preference for containers to be killed by platform in case of memory starvation. Value must
be within [-1000,1000] range.</p>
<h3 id="pid">pid</h3>
<p><code>pid</code> sets the PID mode for container created by Compose.
Supported values are platform specific.</p>
<h3 id="pids_limit">pids_limit</h3>
<p><em>DEPRECATED: use <a href="deploy.md#pids">deploy.resources.limits.pids</a></em></p>
<p><code>pids_limit</code> tunes a containers PIDs limit. Set to -1 for unlimited PIDs.</p>
<pre><code class="language-yml">pids_limit: 10
</code></pre>
<h3 id="platform">platform</h3>
<p><code>platform</code> defines the target platform the containers for the service run on. It uses the <code>os[/arch[/variant]]</code> syntax.</p>
<p>The values of <code>os</code>, <code>arch</code>, and <code>variant</code> must conform to the convention used by the <a href="https://github.com/opencontainers/image-spec/blob/v1.0.2/image-index.md">OCI Image Spec</a>.</p>
<p>Compose uses this attribute to determine which version of the image is pulled
and/or on which platform the services build is performed.</p>
<pre><code class="language-yml">platform: darwin
platform: windows/amd64
platform: linux/arm64/v8
</code></pre>
<h3 id="ports">ports</h3>
<p>Exposes container ports.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>Port mapping must not be used with <code>network_mode: host</code> otherwise a runtime error occurs.</p>
</blockquote>
<h4 id="short-syntax_3">Short syntax</h4>
<p>The short syntax is a colon-separated string to set the host IP, host port, and container port
in the form:</p>
<p><code>[HOST:]CONTAINER[/PROTOCOL]</code> where:</p>
<ul>
<li><code>HOST</code> is <code>[IP:](port | range)</code></li>
<li><code>CONTAINER</code> is <code>port | range</code></li>
<li><code>PROTOCOL</code> to restrict port to specified protocol. <code>tcp</code> and <code>udp</code> values are defined by the Specification,
  Compose offers support for platform-specific protocol names.</li>
</ul>
<p>If host IP is not set, it binds to all network interfaces. Ports can be either a single
value or a range. Host and container must use equivalent ranges.</p>
<p>Either specify both ports (<code>HOST:CONTAINER</code>), or just the container port. In the latter case,
the container runtime automatically allocates any unassigned port of the host.</p>
<p><code>HOST:CONTAINER</code> should always be specified as a (quoted) string, to avoid conflicts
with <a href="https://yaml.org/type/float.html">yaml base-60 float</a>.</p>
<p>Examples:</p>
<pre><code class="language-yml">ports:
  - &quot;3000&quot;
  - &quot;3000-3005&quot;
  - &quot;8000:8000&quot;
  - &quot;9090-9091:8080-8081&quot;
  - &quot;49100:22&quot;
  - &quot;8000-9000:80&quot;
  - &quot;127.0.0.1:8001:8001&quot;
  - &quot;127.0.0.1:5000-5010:5000-5010&quot;
  - &quot;6060:6060/udp&quot;
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p>If Host IP mapping is not supported by a container engine, Compose rejects
the Compose file and ignores the specified host IP.</p>
</blockquote>
<h4 id="long-syntax_3">Long syntax</h4>
<p>The long form syntax allows the configuration of additional fields that can't be
expressed in the short form.</p>
<ul>
<li><code>target</code>: The container port</li>
<li><code>published</code>: The publicly exposed port. It is defined as a string and can be set as a range using syntax <code>start-end</code>. It means the actual port is assigned a remaining available port, within the set range.</li>
<li><code>host_ip</code>: The Host IP mapping, unspecified means all network interfaces (<code>0.0.0.0</code>).</li>
<li><code>protocol</code>: The port protocol (<code>tcp</code> or <code>udp</code>). Defaults to <code>tcp</code>.</li>
<li><code>mode</code>: <code>host</code>: For publishing a host port on each node, or <code>ingress</code> for a port to be load balanced. Defaults to <code>ingress</code>.</li>
<li><code>name</code>: A human-readable name for the port, used to document it's usage within the service</li>
</ul>
<pre><code class="language-yml">ports:
  - name: http
    target: 80
    host_ip: 127.0.0.1
    published: &quot;8080&quot;
    protocol: tcp
    mode: host    

  - name: https
    target: 443
    host_ip: 127.0.0.1
    published: &quot;8083-9000&quot;
    protocol: tcp
    mode: host
</code></pre>
<h3 id="privileged">privileged</h3>
<p><code>privileged</code> configures the service container to run with elevated privileges. Support and actual impacts are platform specific.</p>
<h3 id="profiles">profiles</h3>
<p><code>profiles</code> defines a list of named profiles for the service to be enabled under. If unassigned, the service is always started but if assigned, it is only started if the profile is activated.</p>
<p>If present, <code>profiles</code> follow the regex format of <code>[a-zA-Z0-9][a-zA-Z0-9_.-]+</code>.</p>
<pre><code class="language-yaml">services:
  frontend:
    image: frontend
    profiles: [&quot;frontend&quot;]

  phpmyadmin:
    image: phpmyadmin
    depends_on:
      - db
    profiles:
      - debug
</code></pre>
<h3 id="pull_policy">pull_policy</h3>
<p><code>pull_policy</code> defines the decisions Compose makes when it starts to pull images. Possible values are:</p>
<ul>
<li><code>always</code>: Compose always pulls the image from the registry.</li>
<li><code>never</code>: Compose doesn't pull the image from a registry and relies on the platform cached image.
   If there is no cached image, a failure is reported.</li>
<li><code>missing</code>: Compose pulls the image only if it's not available in the platform cache.
   This is the default option if you are not also using the <a href="build.md">Compose Build Specification</a>.
  <code>if_not_present</code> is considered an alias for this value for backward compatibility.</li>
<li><code>build</code>: Compose builds the image. Compose rebuilds the image if it's already present.</li>
</ul>
<h3 id="read_only">read_only</h3>
<p><code>read_only</code> configures the service container to be created with a read-only filesystem.</p>
<h3 id="restart">restart</h3>
<p><code>restart</code> defines the policy that the platform applies on container termination.</p>
<ul>
<li><code>no</code>: The default restart policy. It does not restart the container under any circumstances.</li>
<li><code>always</code>: The policy always restarts the container until its removal.</li>
<li><code>on-failure</code>: The policy restarts the container if the exit code indicates an error.</li>
<li><code>unless-stopped</code>: The policy restarts the container irrespective of the exit code but stops
  restarting when the service is stopped or removed.</li>
</ul>
<pre><code class="language-yml">    restart: &quot;no&quot;
    restart: always
    restart: on-failure
    restart: unless-stopped
</code></pre>
<h3 id="runtime">runtime</h3>
<p><code>runtime</code> specifies which runtime to use for the services containers.</p>
<p>The value of <code>runtime</code> is specific to the implementation.
For example, <code>runtime</code> can be the name of <a href="https://github.com/opencontainers/runtime-spec/blob/master/implementations.md">an implementation of OCI Runtime Spec</a>, such as "runc".</p>
<pre><code class="language-yml">web:
  image: busybox:latest
  command: true
  runtime: runc
</code></pre>
<h3 id="scale">scale</h3>
<p><code>scale</code> specifies the default number of containers to deploy for this service.
When both are set, <code>scale</code> must be consistent with the <code>replicas</code> attribute in the <a href="deploy.md#replicas">Deploy Specification</a>.</p>
<h3 id="secrets">secrets</h3>
<p><code>secrets</code> grants access to sensitive data defined by <a href="09-secrets.md">secrets</a> on a per-service basis. Two
different syntax variants are supported; the short syntax and the long syntax.</p>
<p>Compose reports an error if the secret doesn't exist on the platform or isn't defined in the
<a href="09-secrets.md"><code>secrets</code></a> section of the Compose file.</p>
<p>Services can be granted access to multiple secrets. Long and short syntax for secrets may be used in the
same Compose file. Defining a secret in the top-level <code>secrets</code> must not imply granting any service access to it.
Such grant must be explicit within service specification as <a href="09-secrets.md">secrets</a> service element.</p>
<h4 id="short-syntax_4">Short syntax</h4>
<p>The short syntax variant only specifies the secret name. This grants the
container access to the secret and mounts it as read-only to <code>/run/secrets/&lt;secret_name&gt;</code>
within the container. The source name and destination mountpoint are both set
to the secret name.</p>
<p>The following example uses the short syntax to grant the <code>frontend</code> service
access to the <code>server-certificate</code> secret. The value of <code>server-certificate</code> is set
to the contents of the file <code>./server.cert</code>.</p>
<pre><code class="language-yml">services:
  frontend:
    image: example/webapp
    secrets:
      - server-certificate
secrets:
  server-certificate:
    file: ./server.cert
</code></pre>
<h4 id="long-syntax_4">Long syntax</h4>
<p>The long syntax provides more granularity in how the secret is created within
the service's containers.</p>
<ul>
<li><code>source</code>: The name of the secret as it exists on the platform.</li>
<li><code>target</code>: The name of the file to be mounted in <code>/run/secrets/</code> in the
  service's task container, or absolute path of the file if an alternate location is required. Defaults to <code>source</code> if not specified.</li>
<li><code>uid</code> and <code>gid</code>: The numeric UID or GID that owns the file within
  <code>/run/secrets/</code> in the service's task containers. Default value is USER running container.</li>
<li><code>mode</code>: The <a href="https://wintelguy.com/permissions-calc.pl">permissions</a> for the file to be mounted in <code>/run/secrets/</code>
  in the service's task containers, in octal notation.
  The default value is world-readable permissions (mode <code>0444</code>).
  The writable bit must be ignored if set. The executable bit may be set.</li>
</ul>
<p>Note that the <code>uid</code>, <code>gid</code>, and <code>mode</code> attributes are implementation specific. </p>
<p>The following example sets the name of the <code>server-certificate</code> secret file to <code>server.crt</code>
within the container, sets the mode to <code>0440</code> (group-readable), and sets the user and group
to <code>103</code>. The value of <code>server-certificate</code> secret is provided by the platform through a lookup and
the secret's lifecycle is not directly managed by Compose.</p>
<pre><code class="language-yml">services:
  frontend:
    image: example/webapp
    secrets:
      - source: server-certificate
        target: server.cert
        uid: &quot;103&quot;
        gid: &quot;103&quot;
        mode: 0440
secrets:
  server-certificate:
    external: true
</code></pre>
<h3 id="security_opt">security_opt</h3>
<p><code>security_opt</code> overrides the default labeling scheme for each container.</p>
<pre><code class="language-yml">security_opt:
  - label:user:USER
  - label:role:ROLE
</code></pre>
<p>For further default labeling schemes you can override, see <a href="https://docs.docker.com/engine/reference/run/#security-configuration">Security configuration</a>.</p>
<h3 id="shm_size">shm_size</h3>
<p><code>shm_size</code> configures the size of the shared memory (<code>/dev/shm</code> partition on Linux) allowed by the service container.
It's specified as a <a href="11-extension.md#specifying-byte-values">byte value</a>.</p>
<h3 id="stdin_open">stdin_open</h3>
<p><code>stdin_open</code> configures a service containers to run with an allocated stdin.</p>
<h3 id="stop_grace_period">stop_grace_period</h3>
<p><code>stop_grace_period</code> specifies how long Compose must wait when attempting to stop a container if it doesn't
handle SIGTERM (or whichever stop signal has been specified with
<a href="#stop_signal"><code>stop_signal</code></a>), before sending SIGKILL. It's specified
as a <a href="11-extension.md#specifying-durations">duration</a>.</p>
<pre><code class="language-yml">    stop_grace_period: 1s
    stop_grace_period: 1m30s
</code></pre>
<p>Default value is 10 seconds for the container to exit before sending SIGKILL.</p>
<h3 id="stop_signal">stop_signal</h3>
<p><code>stop_signal</code> defines the signal that Compose uses to stop the service containers.
If unset containers are stopped by Compose by sending <code>SIGTERM</code>.</p>
<pre><code class="language-yml">stop_signal: SIGUSR1
</code></pre>
<h3 id="storage_opt">storage_opt</h3>
<p><code>storage_opt</code> defines storage driver options for a service.</p>
<pre><code class="language-yml">storage_opt:
  size: '1G'
</code></pre>
<h3 id="sysctls">sysctls</h3>
<p><code>sysctls</code> defines kernel parameters to set in the container. <code>sysctls</code> can use either an array or a map.</p>
<pre><code class="language-yml">sysctls:
  net.core.somaxconn: 1024
  net.ipv4.tcp_syncookies: 0
</code></pre>
<pre><code class="language-yml">sysctls:
  - net.core.somaxconn=1024
  - net.ipv4.tcp_syncookies=0
</code></pre>
<p>You can only use sysctls that are namespaced in the kernel. Docker does not
support changing sysctls inside a container that also modify the host system.
For an overview of supported sysctls, refer to <a href="https://docs.docker.com/engine/reference/commandline/run/#sysctl">configure namespaced kernel
parameters (sysctls) at runtime</a>.</p>
<h3 id="tmpfs">tmpfs</h3>
<p><code>tmpfs</code> mounts a temporary file system inside the container. It can be a single value or a list.</p>
<pre><code class="language-yml">tmpfs: /run
</code></pre>
<pre><code class="language-yml">tmpfs:
  - /run
  - /tmp
</code></pre>
<h3 id="tty">tty</h3>
<p><code>tty</code> configures service container to run with a TTY.</p>
<h3 id="ulimits">ulimits</h3>
<p><code>ulimits</code> overrides the default ulimits for a container. It's specified either as an integer for a single limit
or as mapping for soft/hard limits.</p>
<pre><code class="language-yml">ulimits:
  nproc: 65535
  nofile:
    soft: 20000
    hard: 40000
</code></pre>
<h3 id="user">user</h3>
<p><code>user</code> overrides the user used to run the container process. The default is set by the image (i.e. Dockerfile <code>USER</code>). If it's not set, then <code>root</code>.</p>
<h3 id="userns_mode">userns_mode</h3>
<p><code>userns_mode</code> sets the user namespace for the service. Supported values are platform specific and may depend
on platform configuration.</p>
<pre><code class="language-yml">userns_mode: &quot;host&quot;
</code></pre>
<h3 id="volumes">volumes</h3>
<p><code>volumes</code> define mount host paths or named volumes that are accessible by service containers. You can use <code>volumes</code> to define multiple types of mounts; <code>volume</code>, <code>bind</code>, <code>tmpfs</code>, or <code>npipe</code>. </p>
<p>If the mount is a host path and is only used by a single service, it can be declared as part of the service
definition. To reuse a volume across multiple services, a named
volume must be declared in the <a href="07-volumes.md">top-level <code>volumes</code> key</a>.</p>
<p>The following example shows a named volume (<code>db-data</code>) being used by the <code>backend</code> service,
and a bind mount defined for a single service.</p>
<pre><code class="language-yml">services:
  backend:
    image: example/backend
    volumes:
      - type: volume
        source: db-data
        target: /data
        volume:
          nocopy: true
      - type: bind
        source: /var/run/postgres/postgres.sock
        target: /var/run/postgres/postgres.sock

volumes:
  db-data:
</code></pre>
<h4 id="short-syntax_5">Short syntax</h4>
<p>The short syntax uses a single string with colon-separated values to specify a volume mount
(<code>VOLUME:CONTAINER_PATH</code>), or an access mode (<code>VOLUME:CONTAINER_PATH:ACCESS_MODE</code>).</p>
<ul>
<li><code>VOLUME</code>: Can be either a host path on the platform hosting containers (bind mount) or a volume name.</li>
<li><code>CONTAINER_PATH</code>: The path in the container where the volume is mounted.</li>
<li><code>ACCESS_MODE</code>: A comma-separated <code>,</code> list of options:</li>
<li><code>rw</code>: Read and write access. This is the default if none is specified.</li>
<li><code>ro</code>: Read-only access.</li>
<li><code>z</code>: SELinux option indicating that the bind mount host content is shared among multiple containers.</li>
<li><code>Z</code>: SELinux option indicating that the bind mount host content is private and unshared for other containers.</li>
</ul>
<blockquote>
<p><strong>Note</strong></p>
<p>The SELinux re-labeling bind mount option is ignored on platforms without SELinux.</p>
<p><strong>Note</strong>
Relative host paths are only supported by Compose that deploy to a
local container runtime. This is because the relative path is resolved from the Compose files parent
directory which is only applicable in the local case. When Compose deploys to a non-local
platform it rejects Compose files which use relative host paths with an error. To avoid ambiguities
with named volumes, relative paths should always begin with <code>.</code> or <code>..</code>.</p>
</blockquote>
<h4 id="long-syntax_5">Long syntax</h4>
<p>The long form syntax allows the configuration of additional fields that can't be
expressed in the short form.</p>
<ul>
<li><code>type</code>: The mount type. Either <code>volume</code>, <code>bind</code>, <code>tmpfs</code>, <code>npipe</code>, or <code>cluster</code></li>
<li><code>source</code>: The source of the mount, a path on the host for a bind mount, or the
  name of a volume defined in the
  <a href="07-volumes.md">top-level <code>volumes</code> key</a>. Not applicable for a tmpfs mount.</li>
<li><code>target</code>: The path in the container where the volume is mounted.</li>
<li><code>read_only</code>: Flag to set the volume as read-only.</li>
<li><code>bind</code>: Used to configure additional bind options:</li>
<li><code>propagation</code>: The propagation mode used for the bind.</li>
<li><code>create_host_path</code>: Creates a directory at the source path on host if there is nothing present.
    Compose does nothing if there is something present at the path. This is automatically implied by short syntax
    for backward compatibility with <code>docker-compose</code> legacy.</li>
<li><code>selinux</code>: The SELinux re-labeling option <code>z</code> (shared) or <code>Z</code> (private)</li>
<li><code>volume</code>: Configures additional volume options:</li>
<li><code>nocopy</code>: Flag to disable copying of data from a container when a volume is created.</li>
<li><code>tmpfs</code>: Configures additional tmpfs options:</li>
<li><code>size</code>: The size for the tmpfs mount in bytes (either numeric or as bytes unit).</li>
<li><code>mode</code>: The file mode for the tmpfs mount as Unix permission bits as an octal number.</li>
<li><code>consistency</code>: The consistency requirements of the mount. Available values are platform specific.</li>
</ul>
<h3 id="volumes_from">volumes_from</h3>
<p><code>volumes_from</code> mounts all of the volumes from another service or container. You can optionally specify
read-only access <code>ro</code> or read-write <code>rw</code>. If no access level is specified, then read-write access is used.</p>
<p>You can also mount volumes from a container that is not managed by Compose by using the <code>container:</code> prefix.</p>
<pre><code class="language-yaml">volumes_from:
  - service_name
  - service_name:ro
  - container:container_name
  - container:container_name:rw
</code></pre>
<h3 id="working_dir">working_dir</h3>
<p><code>working_dir</code> overrides the container's working directory which is specified by the image, for example Dockerfile's <code>WORKDIR</code>.</p>
<h2 id="networks-top-level-element">Networks top-level element</h2>
<p>Networks are the layer that allow services to communicate with each other.</p>
<p>The top-level <code>networks</code> element lets you configure named networks that can be reused across multiple services. To use a network across multiple services, you must explicitly grant each service access by using the <a href="05-services.md">networks</a> attribute within the <code>services</code> top-level element. The <code>networks</code> top-level element has additional syntax that provides more granular control.</p>
<h3 id="examples">Examples</h3>
<h4 id="basic-example">Basic example</h4>
<p>In the following example, at runtime, networks <code>front-tier</code> and <code>back-tier</code> are created and the <code>frontend</code> service
is connected to <code>front-tier</code> and <code>back-tier</code> networks.</p>
<pre><code class="language-yml">services:
  frontend:
    image: example/webapp
    networks:
      - front-tier
      - back-tier

networks:
  front-tier:
  back-tier:
</code></pre>
<h4 id="advanced-example">Advanced example</h4>
<pre><code class="language-yml">services:
  proxy:
    build: ./proxy
    networks:
      - frontend
  app:
    build: ./app
    networks:
      - frontend
      - backend
  db:
    image: postgres
    networks:
      - backend

networks:
  frontend:
    ## Use a custom driver
    driver: custom-driver-1
  backend:
    ## Use a custom driver which takes special options
    driver: custom-driver-2
    driver_opts:
      foo: &quot;1&quot;
      bar: &quot;2&quot;
</code></pre>
<p>The advanced example shows a Compose file which defines two custom networks. The <code>proxy</code> service is isolated from the <code>db</code> service, because they do not share a network in common. Only <code>app</code> can talk to both.</p>
<h3 id="attributes">Attributes</h3>
<h4 id="driver">driver</h4>
<p><code>driver</code> specifies which driver should be used for this network. Compose returns an error if the
driver is not available on the platform.</p>
<pre><code class="language-yml">networks:
  db-data:
    driver: overlay
</code></pre>
<p>Default and available values are platform specific. Compose supports the following drivers:
<code>none</code> and <code>host</code></p>
<ul>
<li><code>host</code>: Use the host's networking stack.</li>
<li><code>none</code>: Turn off networking.</li>
</ul>
<h5 id="host-or-none">host or none</h5>
<p>The syntax for using built-in networks such as <code>host</code> and <code>none</code> is different, as such networks implicitly exist outside
the scope of Compose. To use them, you must define an external network with the name <code>host</code> or <code>none</code> and
an alias that Compose can use (<code>hostnet</code> and <code>nonet</code> in the following example), then grant the service
access to that network using its alias.</p>
<pre><code class="language-yml">services:
  web:
    networks:
      hostnet: {}

networks:
  hostnet:
    external: true
    name: host
</code></pre>
<pre><code class="language-yml">services:
  web:
    ...
    networks:
      nonet: {}

networks:
  nonet:
    external: true
    name: none
</code></pre>
<h4 id="driver_opts">driver_opts</h4>
<p><code>driver_opts</code> specifies a list of options as key-value pairs to pass to the driver. These options are
driver-dependent. Consult the driver's documentation for more information. </p>
<pre><code class="language-yml">networks:
  db-data:
    driver_opts:
      foo: &quot;bar&quot;
      baz: 1
</code></pre>
<h4 id="attachable">attachable</h4>
<p>If <code>attachable</code> is set to <code>true</code>, then standalone containers should be able to attach to this network, in addition to services.
If a standalone container attaches to the network, it can communicate with services and other standalone containers
that are also attached to the network.</p>
<pre><code class="language-yml">networks:
  mynet1:
    driver: overlay
    attachable: true
</code></pre>
<h4 id="enable_ipv6">enable_ipv6</h4>
<p><code>enable_ipv6</code> enables IPv6 networking. For an example, see step four of <a href="https://docs.docker.com/config/daemon/ipv6/">Create an IPv6 network</a>.</p>
<h3 id="external">external</h3>
<p>If set to <code>true</code>:
 - <code>external</code> specifies that this networks lifecycle is maintained outside of that of the application.
Compose doesn't attempt to create these networks, and returns an error if one doesn't exist.
 - All other attributes apart from name are irrelevant. If Compose detects any other attribute, it rejects the Compose file as invalid.</p>
<p>In the example below, <code>proxy</code> is the gateway to the outside world. Instead of attempting to create a network, Compose
queries the platform for an existing network simply called <code>outside</code> and connects the
<code>proxy</code> service's containers to it.</p>
<pre><code class="language-yml">
services:
  proxy:
    image: example/proxy
    networks:
      - outside
      - default
  app:
    image: example/app
    networks:
      - default

networks:
  outside:
    external: true
</code></pre>
<h4 id="ipam">ipam</h4>
<p><code>ipam</code> specifies a custom IPAM configuration. This is an object with several properties, each of which is optional:</p>
<ul>
<li><code>driver</code>: Custom IPAM driver, instead of the default.</li>
<li><code>config</code>: A list with zero or more configuration elements, each containing a:</li>
<li><code>subnet</code>: Subnet in CIDR format that represents a network segment</li>
<li><code>ip_range</code>: Range of IPs from which to allocate container IPs</li>
<li><code>gateway</code>: IPv4 or IPv6 gateway for the master subnet</li>
<li><code>aux_addresses</code>: Auxiliary IPv4 or IPv6 addresses used by Network driver, as a mapping from hostname to IP</li>
<li><code>options</code>: Driver-specific options as a key-value mapping.</li>
</ul>
<pre><code class="language-yml">networks:
  mynet1:
    ipam:
      driver: default
      config:
        - subnet: 172.28.0.0/16
          ip_range: 172.28.5.0/24
          gateway: 172.28.5.254
          aux_addresses:
            host1: 172.28.1.5
            host2: 172.28.1.6
            host3: 172.28.1.7
      options:
        foo: bar
        baz: &quot;0&quot;
</code></pre>
<h3 id="internal">internal</h3>
<p>By default, Compose provides external connectivity to networks. <code>internal</code>, when set to <code>true</code>, allows you to
create an externally isolated network.</p>
<h3 id="labels_1">labels</h3>
<p>Add metadata to containers using <code>labels</code>. You can use either an array or a dictionary.</p>
<p>It is recommended that you use reverse-DNS notation to prevent labels from conflicting with those used by other software.</p>
<pre><code class="language-yml">networks:
  mynet1:
    labels:
      com.example.description: &quot;Financial transaction network&quot;
      com.example.department: &quot;Finance&quot;
      com.example.label-with-empty-value: &quot;&quot;
</code></pre>
<pre><code class="language-yml">networks:
  mynet1:
    labels:
      - &quot;com.example.description=Financial transaction network&quot;
      - &quot;com.example.department=Finance&quot;
      - &quot;com.example.label-with-empty-value&quot;
</code></pre>
<p>Compose sets <code>com.docker.compose.project</code> and <code>com.docker.compose.network</code> labels.</p>
<h3 id="name">name</h3>
<p><code>name</code> sets a custom name for the network. The name field can be used to reference networks which contain special characters.
The name is used as is and is not scoped with the project name.</p>
<pre><code class="language-yml">networks:
  network1:
    name: my-app-net
</code></pre>
<p>It can also be used in conjunction with the <code>external</code> property to define the platform network that Compose
should retrieve, typically by using a parameter so the Compose file doesn't need to hard-code runtime specific values:</p>
<pre><code class="language-yml">networks:
  network1:
    external: true
    name: &quot;${NETWORK_ID}&quot;
</code></pre>
<h2 id="volumes-top-level-element">Volumes top-level element</h2>
<p>Volumes are persistent data stores implemented by the container engine. Compose offers a neutral way for services to mount volumes, and configuration parameters to allocate them to infrastructure.</p>
<p>The top-level <code>volumes</code> declaration lets you configure named volumes that can be reused across multiple services. To use a volume across multiple services, you must explicitly grant each service access by using the <a href="05-services.md#volumes">volumes</a> attribute within the <code>services</code> top-level element. The <code>volumes</code> attribute has additional syntax that provides more granular control.</p>
<h3 id="example">Example</h3>
<p>The following example shows a two-service setup where a database's data directory is shared with another service as a volume, named
<code>db-data</code>, so that it can be periodically backed up.</p>
<pre><code class="language-yml">services:
  backend:
    image: example/database
    volumes:
      - db-data:/etc/data

  backup:
    image: backup-service
    volumes:
      - db-data:/var/lib/backup/data

volumes:
  db-data:
</code></pre>
<p>The <code>db-data</code> volume is mounted at the <code>/var/lib/backup/data</code> and <code>/etc/data</code> container paths for backup and backend respectively.</p>
<p>Running <code>docker compose up</code> creates the volume if it doesn't already exist. Otherwise, the existing volume is used and is recreated if it's manually deleted outside of Compose.</p>
<h3 id="attributes_1">Attributes</h3>
<p>An entry under the top-level <code>volumes</code> section can be empty, in which case it uses the container engine's default configuration for
creating a volume. Optionally, you can configure it with the following keys:</p>
<h4 id="driver_1">driver</h4>
<p>Specifies which volume driver should be used. Default and available values are platform specific. If the driver is not available, Compose returns an error and doesn't deploy the application.</p>
<pre><code class="language-yml">volumes:
  db-data:
    driver: foobar
</code></pre>
<h4 id="driver_opts_1">driver_opts</h4>
<p><code>driver_opts</code> specifies a list of options as key-value pairs to pass to the driver for this volume. The options are driver-dependent.</p>
<pre><code class="language-yml">volumes:
  example:
    driver_opts:
      type: &quot;nfs&quot;
      o: &quot;addr=10.40.0.199,nolock,soft,rw&quot;
      device: &quot;:/docker/example&quot;
</code></pre>
<h4 id="external_1">external</h4>
<p>If set to <code>true</code>:
 - <code>external</code> specifies that this volume already exists on the platform and its lifecycle is managed outside
of that of the application. Compose doesn't then create the volume, and returns an error if the volume doesn't  exist.
 - All other attributes apart from <code>name</code> are irrelevant. If Compose detects any other attribute, it rejects the Compose file as invalid.</p>
<p>In the example below, instead of attempting to create a volume called
<code>{project_name}_db-data</code>, Compose looks for an existing volume simply
called <code>db-data</code> and mounts it into the <code>backend</code> service's containers.</p>
<pre><code class="language-yml">services:
  backend:
    image: example/database
    volumes:
      - db-data:/etc/data

volumes:
  db-data:
    external: true
</code></pre>
<h4 id="labels_2">labels</h4>
<p><code>labels</code> are used to add metadata to volumes. You can use either an array or a dictionary.</p>
<p>It's recommended that you use reverse-DNS notation to prevent your labels from conflicting with those used by other software.</p>
<pre><code class="language-yml">volumes:
  db-data:
    labels:
      com.example.description: &quot;Database volume&quot;
      com.example.department: &quot;IT/Ops&quot;
      com.example.label-with-empty-value: &quot;&quot;
</code></pre>
<pre><code class="language-yml">volumes:
  db-data:
    labels:
      - &quot;com.example.description=Database volume&quot;
      - &quot;com.example.department=IT/Ops&quot;
      - &quot;com.example.label-with-empty-value&quot;
</code></pre>
<p>Compose sets <code>com.docker.compose.project</code> and <code>com.docker.compose.volume</code> labels.</p>
<h4 id="name_1">name</h4>
<p><code>name</code> sets a custom name for a volume. The name field can be used to reference volumes that contain special
characters. The name is used as is and is not scoped with the stack name.</p>
<pre><code class="language-yml">volumes:
  db-data:
    name: &quot;my-app-data&quot;
</code></pre>
<p>This makes it possible to make this lookup name a parameter of the Compose file, so that the model ID for the volume is hard-coded but the actual volume ID on the platform is set at runtime during deployment. </p>
<p>For example, if <code>DATABASE_VOLUME=my_volume_001</code> in your <code>.env</code> file:</p>
<pre><code class="language-yml">volumes:
  db-data:
      name: ${DATABASE_VOLUME}
</code></pre>
<p>Running <code>docker compose up</code> uses the volume called <code>my_volume_001</code>. </p>
<p>It can also be used in conjunction with the <code>external</code> property. This means the name of the volume used to lookup the actual volume on the platform is set separately from the name used to refer to it within the Compose file:</p>
<pre><code class="language-yml">volumes:
  db-data:
    external:
      name: actual-name-of-volume
</code></pre>
<h2 id="configs-top-level-element">Configs top-level element</h2>
<p>Configs allow services to adapt their behaviour without the need to rebuild a Docker image.</p>
<p>Services can only access configs when explicitly granted by a <a href="05-services.md#configs"><code>configs</code></a> attribute within the <code>services</code> top-level element.</p>
<p>As with volumes, configs are mounted as files into a service's container's filesystem. The location of the mount point within the container defaults to <code>/&lt;config-name&gt;</code> in Linux containers and <code>C:\&lt;config-name&gt;</code> in Windows containers. </p>
<p>By default, the config:
- Is owned by the user running the container command but can be overridden by service configuration.
- Has world-readable permissions (mode 0444), unless the service is configured to override this.</p>
<p>The top-level <code>configs</code> declaration defines or references configuration data that is granted to services in your Compose application. The source of the config is either <code>file</code> or <code>external</code>.</p>
<ul>
<li><code>file</code>: The config is created with the contents of the file at the specified path.</li>
<li><code>environment</code>: The config content is created with the value of an environment variable.</li>
<li><code>content</code>: The content is created with the inlined value.</li>
<li><code>external</code>: If set to true, <code>external</code> specifies that this config has already been created. Compose does not
  attempt to create it, and if it does not exist, an error occurs.</li>
<li><code>name</code>: The name of the config object in the container engine to look up. This field can be used to
  reference configs that contain special characters. The name is used as is
  and will <strong>not</strong> be scoped with the project name.</li>
</ul>
<h3 id="example-1">Example 1</h3>
<p><code>&lt;project_name&gt;_http_config</code> is created when the application is deployed,
by registering the content of the <code>httpd.conf</code> as the configuration data.</p>
<pre><code class="language-yml">configs:
  http_config:
    file: ./httpd.conf
</code></pre>
<p>Alternatively, <code>http_config</code> can be declared as external. Compose looks up <code>http_config</code> to expose the configuration data to relevant services.</p>
<pre><code class="language-yml">configs:
  http_config:
    external: true
</code></pre>
<h3 id="example-2">Example 2</h3>
<p><code>&lt;project_name&gt;_app_config</code> is created when the application is deployed,
by registering the inlined content as the configuration data. This comes with the
benefits Compose will infer variables when creating the config, which allows to
adjust content according to service configuration:</p>
<pre><code class="language-yml">configs:
  app_config:
    content: |
      debug=${DEBUG}
      spring.application.admin.enabled=${DEBUG}
      spring.application.name=${COMPOSE_PROJECT_NAME}
</code></pre>
<h3 id="example-3">Example 3</h3>
<p>External configs lookup can also use a distinct key by specifying a <code>name</code>. </p>
<p>The following
example modifies the previous one to look up a config using the parameter <code>HTTP_CONFIG_KEY</code>. The
the actual lookup key will is set at deployment time by the <a href="12-interpolation.md">interpolation</a> of
variables, but exposed to containers as hard-coded ID <code>http_config</code>.</p>
<pre><code class="language-yml">configs:
  http_config:
    external: true
    name: &quot;${HTTP_CONFIG_KEY}&quot;
</code></pre>
<p>If <code>external</code> is set to <code>true</code>, all other attributes apart from <code>name</code> are irrelevant. If Compose detecs any other attribute, it rejects the Compose file as invalid.</p>
<h2 id="secrets-top-level-element">Secrets top-level element</h2>
<p>Secrets are a flavor of <a href="08-configs.md">Configs</a> focusing on sensitive data, with specific constraint for this usage. </p>
<p>Services can only access secrets when explicitly granted by a <a href="05-services.md#secrets"><code>secrets</code></a> attribute within the <code>services</code> top-level element.</p>
<p>The top-level <code>secrets</code> declaration defines or references sensitive data that is granted to the services in your Compose
application. The source of the secret is either <code>file</code> or <code>environment</code>.</p>
<ul>
<li><code>file</code>: The secret is created with the contents of the file at the specified path.</li>
<li><code>environment</code>: The secret is created with the value of an environment variable.</li>
<li><code>external</code>: If set to true, <code>external</code> specifies that this secret has already been created. Compose does
  not attempt to create it, and if it does not exist, an error occurs.</li>
<li><code>name</code>: The name of the secret object in Docker. This field can be used to
  reference secrets that contain special characters. The name is used as is
  and isn't scoped with the project name.</li>
</ul>
<h3 id="example-1_1">Example 1</h3>
<p><code>server-certificate</code> secret is created as <code>&lt;project_name&gt;_server-certificate</code> when the application is deployed,
by registering content of the <code>server.cert</code> as a platform secret.</p>
<pre><code class="language-yml">secrets:
  server-certificate:
    file: ./server.cert
</code></pre>
<h3 id="example-2_1">Example 2</h3>
<p><code>token</code> secret  is created as <code>&lt;project_name&gt;_token</code> when the application is deployed,
by registering the content of the <code>OAUTH_TOKEN</code> environment variable as a platform secret.</p>
<pre><code class="language-yml">secrets:
  token:
    environment: &quot;OAUTH_TOKEN&quot;
</code></pre>
<p>Alternatively, <code>server-certificate</code> can be declared as external. Compose looks up the <code>server-certificate</code> secret to expose to relevant services.</p>
<pre><code class="language-yml">secrets:
  server-certificate:
    external: true
</code></pre>
<h3 id="example-3_1">Example 3</h3>
<p>External secrets lookup can also use a distinct key by specifying a <code>name</code>. </p>
<p>The following example modifies the previous example to look up a secret using the name <code>CERTIFICATE_KEY</code>. The actual lookup key is set at deployment time by the <a href="12-interpolation.md">interpolation</a> of
variables, but exposed to containers as hard-coded ID <code>server-certificate</code>.</p>
<pre><code class="language-yml">secrets:
  server-certificate:
    external: true
    name: &quot;${CERTIFICATE_KEY}&quot;
</code></pre>
<p>If <code>external</code> is set to <code>true</code>, all other attributes apart from <code>name</code> are irrelevant. If Compose detects any other attribute, it rejects the Compose file as invalid.</p>
<p>Your Compose file needs to explicitly grant access to the secrets to relevant services in your application.</p>
<h2 id="fragments">Fragments</h2>
<p>With Compose, you can use built-in <a href="https://www.yaml.org/spec/1.2/spec.html#id2765878">YAML</a> features to make your Compose file neater and more efficient. Anchors and aliases let you create re-usable blocks. This is useful if you start to find common configurations that span multiple services. Having re-usable blocks minimizes potential mistakes.</p>
<p>Anchors are created using the <code>&amp;</code> sign. The sign is followed by an alias name. You can use this alias with the <code>*</code> sign later to reference the value following the anchor. Make sure there is no space between the <code>&amp;</code> and the <code>*</code> characters and the following alias name. </p>
<p>You can use more than one anchor and alias in a single Compose file.</p>
<h3 id="example-1_2">Example 1</h3>
<pre><code class="language-yml">volumes:
  db-data: &amp;default-volume
    driver: default
  metrics: *default-volume
</code></pre>
<p>In the example above, a <code>default-volume</code> anchor is created based on the <code>db-data</code> volume. It is later reused by the alias <code>*default-volume</code> to define the <code>metrics</code> volume. </p>
<p>Anchor resolution takes place before <a href="12-interpolation.md">variables interpolation</a>, so variables can't be used to set anchors or aliases.</p>
<h3 id="example-2_2">Example 2</h3>
<pre><code class="language-yml">services:
  first:
    image: my-image:latest
    environment: &amp;env
      - CONFIG_KEY
      - EXAMPLE_KEY
      - DEMO_VAR
  second:
    image: another-image:latest
    environment: *env
</code></pre>
<p>If you have an anchor that you want to use in more than one service, use it in conjunction with an <a href="11-extension.md">extension</a> to make your Compose file easier to maintain.</p>
<h3 id="example-3_2">Example 3</h3>
<p>You may want to partially override values. Compose follows the rule outlined by <a href="https://yaml.org/type/merge.html">YAML merge type</a>. </p>
<p>In the following example, <code>metrics</code> volume specification uses alias
to avoid repetition but overrides <code>name</code> attribute:</p>
<pre><code class="language-yml">
services:
  backend:
    image: example/database
    volumes:
      - db-data
      - metrics
volumes:
  db-data: &amp;default-volume
    driver: default
    name: &quot;data&quot;
  metrics:
    &lt;&lt;: *default-volume
    name: &quot;metrics&quot;
</code></pre>
<h3 id="example-4">Example 4</h3>
<p>You can also extend the anchor to add additional values.</p>
<pre><code class="language-yml">services:
  first:
    image: my-image:latest
    environment: &amp;env
      FOO: BAR
      ZOT: QUIX
  second:
    image: another-image:latest
    environment:
      &lt;&lt;: *env
      YET_ANOTHER: VARIABLE
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p><a href="https://yaml.org/type/merge.html">YAML merge</a> only applies to mappings, and can't be used with sequences. </p>
</blockquote>
<p>In example above, the environment variables must be declared using the <code>FOO: BAR</code> mapping syntax, while the sequence syntax <code>- FOO=BAR</code> is only valid when no fragments are involved. </p>
<h2 id="extension">Extension</h2>
<p>As with <a href="10-fragments.md">Fragments</a>, Extensions can be used to make your Compose file more efficient and easier to maintain. Extensions can also be used with <a href="10-fragments.md">anchors and aliases</a>.</p>
<p>Use the prefix <code>x-</code> as a top-level element to modularize configurations that you want to reuse. 
Compose ignores any fields that start with <code>x-</code>, this is the sole exception where Compose silently ignores unrecognized fields.</p>
<p>They also can be used within any structure in a Compose file where user-defined keys are not expected. 
Compose use those to enable experimental features, the same way browsers add support for <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#vendor-keywords">custom CSS features</a></p>
<h3 id="example-1_3">Example 1</h3>
<pre><code class="language-yml">x-custom:
  foo:
    - bar
    - zot

services:
  webapp:
    image: example/webapp
    x-foo: bar
</code></pre>
<pre><code class="language-yml">service:
  backend:
    deploy:
      placement:
        x-aws-role: &quot;arn:aws:iam::XXXXXXXXXXXX:role/foo&quot;
        x-aws-region: &quot;eu-west-3&quot;
        x-azure-region: &quot;france-central&quot;
</code></pre>
<h3 id="example-2_3">Example 2</h3>
<pre><code class="language-yml">x-env: &amp;env
  environment:
    - CONFIG_KEY
    - EXAMPLE_KEY

services:
  first:
    &lt;&lt;: *env
    image: my-image:latest
  second:
    &lt;&lt;: *env
    image: another-image:latest
</code></pre>
<p>In this example, the environment variables do not belong to either of the services. Theyve been lifted out completely into the <code>x-env</code> extension field.
This defines a new node which contains the environment field. The <code>&amp;env</code> YAML anchor is used so both services can reference the extension fields value as <code>*env</code>.</p>
<h3 id="example-3_3">Example 3</h3>
<pre><code class="language-yml">x-function: &amp;function
 labels:
   function: &quot;true&quot;
 depends_on:
   - gateway
 networks:
   - functions
 deploy:
   placement:
     constraints:
       - 'node.platform.os == linux'
services:
 ## Node.js gives OS info about the node (Host)
 nodeinfo:
   &lt;&lt;: *function
   image: functions/nodeinfo:latest
   environment:
     no_proxy: &quot;gateway&quot;
     https_proxy: $https_proxy
 ## Uses `cat` to echo back response, fastest function to execute.
 echoit:
   &lt;&lt;: *function
   image: functions/alpine:health
   environment:
     fprocess: &quot;cat&quot;
     no_proxy: &quot;gateway&quot;
     https_proxy: $https_proxy
</code></pre>
<p>The <code>nodeinfo</code> and <code>echoit</code> services both include the <code>x-function</code> extension via the <code>&amp;function</code> anchor, then set their specific image and environment. </p>
<h3 id="example-4_1">Example 4</h3>
<p>Using <a href="https://yaml.org/type/merge.html">YAML merge</a> it is also possible to use multiple extensions and share
and override additional attributes for specific needs:</p>
<pre><code class="language-yml">x-environment: &amp;default-environment
  FOO: BAR
  ZOT: QUIX
x-keys: &amp;keys
  KEY: VALUE
services:
  frontend:
    image: example/webapp
    environment: 
      &lt;&lt; : [*default-environment, *keys]
      YET_ANOTHER: VARIABLE
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p><a href="https://yaml.org/type/merge.html">YAML merge</a> only applies to mappings, and can't be used with sequences. </p>
<p>In the example above, the environment variables are declared using the <code>FOO: BAR</code> mapping syntax, while the sequence syntax <code>- FOO=BAR</code> is only valid when no fragments are involved.</p>
</blockquote>
<h3 id="informative-historical-notes">Informative Historical Notes</h3>
<p>This section is informative. At the time of writing, the following prefixes are known to exist:</p>
<table>
<thead>
<tr>
<th>Prefix</th>
<th>Vendor/Organization</th>
</tr>
</thead>
<tbody>
<tr>
<td>docker</td>
<td>Docker</td>
</tr>
<tr>
<td>kubernetes</td>
<td>Kubernetes</td>
</tr>
</tbody>
</table>
<h3 id="specifying-byte-values">Specifying byte values</h3>
<p>Values express a byte value as a string in <code>{amount}{byte unit}</code> format:
The supported units are <code>b</code> (bytes), <code>k</code> or <code>kb</code> (kilo bytes), <code>m</code> or <code>mb</code> (mega bytes) and <code>g</code> or <code>gb</code> (giga bytes).</p>
<pre><code>    2b
    1024kb
    2048k
    300m
    1gb
</code></pre>
<h3 id="specifying-durations">Specifying durations</h3>
<p>Values express a duration as a string in the form of <code>{value}{unit}</code>.
The supported units are <code>us</code> (microseconds), <code>ms</code> (milliseconds), <code>s</code> (seconds), <code>m</code> (minutes) and <code>h</code> (hours).
Values can combine multiple values without separator.</p>
<pre><code>  10ms
  40s
  1m30s
  1h5m30s20ms
</code></pre>
<h2 id="interpolation">Interpolation</h2>
<p>Values in a Compose file can be set by variables and interpolated at runtime. Compose files use a Bash-like
syntax <code>${VARIABLE}</code>.</p>
<p>Both <code>$VARIABLE</code> and <code>${VARIABLE}</code> syntax is supported. Default values can be defined inline using typical shell syntax:</p>
<ul>
<li><code>${VARIABLE:-default}</code> evaluates to <code>default</code> if <code>VARIABLE</code> is unset or
  empty in the environment.</li>
<li><code>${VARIABLE-default}</code> evaluates to <code>default</code> only if <code>VARIABLE</code> is unset
  in the environment.</li>
</ul>
<p>Similarly, the following syntax allows you to specify mandatory variables:</p>
<ul>
<li><code>${VARIABLE:?err}</code> exits with an error message containing <code>err</code> if
  <code>VARIABLE</code> is unset or empty in the environment.</li>
<li><code>${VARIABLE?err}</code> exits with an error message containing <code>err</code> only if
  <code>VARIABLE</code> is unset in the environment.</li>
</ul>
<p>Interpolation can also be nested:</p>
<ul>
<li><code>${VARIABLE:-${FOO}}</code></li>
<li><code>${VARIABLE?$FOO}</code></li>
<li><code>${VARIABLE:-${FOO:-default}}</code></li>
</ul>
<p>Other extended shell-style features, such as <code>${VARIABLE/foo/bar}</code>, are not
supported by Compose.</p>
<p>You can use a <code>$$</code> (double-dollar sign) when your configuration needs a literal
dollar sign. This also prevents Compose from interpolating a value, so a <code>$$</code>
allows you to refer to environment variables that you don't want processed by
Compose.</p>
<pre><code class="language-yml">web:
  build: .
  command: &quot;$$VAR_NOT_INTERPOLATED_BY_COMPOSE&quot;
</code></pre>
<p>If Compose can't resolve a substituted variable and no default value is defined, it displays a warning and substitutes the variable with an empty string.</p>
<p>As any values in a Compose file can be interpolated with variable substitution, including compact string notation
for complex elements, interpolation is applied before a merge on a per-file basis.</p>
<p>Interpolation applies only to YAML values, not to keys. For the few places where keys are actually arbitrary
user-defined strings, such as <a href="05-services.md#labels">labels</a> or <a href="05-services.md#environment">environment</a>, an alternate equal sign syntax
must be used for interpolation to apply. For example:</p>
<pre><code class="language-yml">services:
  foo:
    labels:
      &quot;$VAR_NOT_INTERPOLATED_BY_COMPOSE&quot;: &quot;BAR&quot;
</code></pre>
<pre><code class="language-yml">services:
  foo:
    labels:
      - &quot;$VAR_INTERPOLATED_BY_COMPOSE=BAR&quot;
</code></pre>
<h2 id="merge-and-override">Merge and override</h2>
<p>Compose lets you define a Compose application model through <a href="https://docs.docker.com/compose/multiple-compose-files/">multiple Compose files</a>. 
When doing so, Compose follows the rules declared in this section to merge Compose files.</p>
<h3 id="mapping">Mapping</h3>
<p>A YAML <code>mapping</code> gets merged by adding missing entries and merging the conflicting ones.</p>
<p>Merging the following example YAML trees:</p>
<pre><code class="language-yaml">services:
  foo:
    key1: value1
    key2: value2
</code></pre>
<pre><code class="language-yaml">services:
  foo:
    key2: VALUE
    key3: value3
</code></pre>
<p>Results in a Compose application model equivalent to the YAML tree:</p>
<pre><code class="language-yaml">services:
  foo:
    key1: value1
    key2: VALUE
    key3: value3
</code></pre>
<h3 id="sequence">Sequence</h3>
<p>A YAML <code>sequence</code> is merged by appending values from the overriding Compose file to the previous one.</p>
<p>Merging the following example YAML trees:</p>
<pre><code class="language-yaml">services:
  foo:
    DNS:
      - 1.1.1.1
</code></pre>
<pre><code class="language-yaml">services:
  foo:
    DNS: 
      - 8.8.8.8
</code></pre>
<p>Results in a Compose application model equivalent to the YAML tree:</p>
<pre><code class="language-yaml">services:
  foo:
    DNS:
      - 1.1.1.1
      - 8.8.8.8
</code></pre>
<h3 id="exceptions">Exceptions</h3>
<h4 id="shell-commands">Shell commands</h4>
<p>When merging Compose files that use the services attributes <a href="05-services.md#command">command</a>, <a href="05-services.md#entrypoint">entrypoint</a> and <a href="05-services.md#healthcheck">healthcheck: <code>test</code></a>, the value is overridden by the latest Compose file, and not appended.</p>
<p>Merging the following example YAML trees:</p>
<pre><code class="language-yaml">services:
  foo:
    command: [&quot;echo&quot;, &quot;foo&quot;]
</code></pre>
<pre><code class="language-yaml">services:
  foo:
    command: [&quot;echo&quot;, &quot;bar&quot;]
</code></pre>
<p>Results in a Compose application model equivalent to the YAML tree:</p>
<pre><code class="language-yaml">services:
  foo:
    command: [&quot;echo&quot;, &quot;bar&quot;]
</code></pre>
<h4 id="unique-resources">Unique resources</h4>
<p>Applies to the <a href="05-services.md#ports">ports</a>, <a href="05-services.md#volumes">volumes</a>, <a href="05-services.md#secrets">secrets</a> and <a href="05-services.md#configs">configs</a> services attributes.
While these types are modeled in a Compose file as a sequence, they have special uniqueness requirements:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Unique key</th>
</tr>
</thead>
<tbody>
<tr>
<td>volumes</td>
<td>target</td>
</tr>
<tr>
<td>secrets</td>
<td>source</td>
</tr>
<tr>
<td>configs</td>
<td>source</td>
</tr>
<tr>
<td>ports</td>
<td>{ip, target, published, protocol}</td>
</tr>
</tbody>
</table>
<p>When merging Compose files, Compose appends new entries that do not violate a uniqueness constraint and merge entries that share a unique key.</p>
<p>Merging the following example YAML trees:</p>
<pre><code class="language-yaml">services:
  foo:
    volumes:
      - foo:/work
</code></pre>
<pre><code class="language-yaml">services:
  foo:
    volumes:
      - bar:/work
</code></pre>
<p>Results in a Compose application model equivalent to the YAML tree:</p>
<pre><code class="language-yaml">services:
  foo:
    volumes:
      - bar:/work
</code></pre>
<h4 id="reset-value">Reset value</h4>
<p>In addition to the previously described mechanism, an override Compose file can also be used to remove elements from your application model.
For this purpose, the custom <a href="https://yaml.org/spec/1.2.2/#24-tags">YAML tag</a> <code>!reset</code> can be set to
override a value set by the overriden Compose file. A valid value for attribute must be provided,
but will be ignored and target attribute will be set with type's default value or <code>null</code>. </p>
<p>For readability, it is recommended to explicitly set the attribute value to the null (<code>null</code>) or empty
array <code>[]</code> (with <code>!reset null</code> or <code>!reset []</code>) so that it is clear that resulting attribute will be
cleared.</p>
<p>A base <code>compose.yaml</code> file:</p>
<pre><code class="language-yaml">services:
app:
    image: myapp
    ports:
      - &quot;8080:80&quot;
    environment:
      FOO: BAR             
</code></pre>
<p>And an <code>overide.compose.yaml</code> file:</p>
<pre><code class="language-yaml">services:
  app:
    image: myapp
    ports: !reset []
    environment:
      FOO: !reset null
</code></pre>
<p>Results in:</p>
<pre><code class="language-yaml">services:
  app:
    image: myapp
</code></pre>
<h4 id="replace-value">Replace value</h4>
<p>While <code>!reset</code> can be used to remove a declaration from a Compose file using an override file, <code>!override</code> allows
you to fully replace an attribute, bypassing the standard merge rules. A typical example is to fully replace a 
resource definition, to rely on a distinct model but using the same name.</p>
<p>A base <code>compose.yaml</code> file:</p>
<pre><code class="language-yaml">services:
app:
    image: myapp
    ports:
      - &quot;8080:80&quot;
</code></pre>
<p>To remove the original port, but expose a new one, the following override file is used:</p>
<pre><code class="language-yaml">services:
  app:
    ports: !override
      - &quot;8443:443&quot; 
</code></pre>
<p>This results in: </p>
<pre><code class="language-yaml">services:
  app:
    image: myapp
    ports:
      - &quot;8443:443&quot; 
</code></pre>
<p>If <code>!override</code> had not been used, both <code>8080:80</code> and <code>8443:443</code> would be exposed as per the <a href="#sequence">merging rules outlined above</a>. </p>
<h2 id="include">Include</h2>
<p>A Compose application can declare dependency on another Compose application. This is useful if:
- You want to reuse other Compose files.
- You need to factor out parts of your application model into separate Compose files so they can be managed separately or shared with others.
- Teams need to keep a Compose file reasonably complicated for the limited amount of resources it has to declare for it's own sub-domain, within a larger deployment.</p>
<p>The <code>include</code> top-level section is used to define the dependency on another Compose application, or sub-domain.
Each path listed in the <code>include</code> section is loaded as an individual Compose application model, with it's own project directory, in order to resolve relative paths. </p>
<p>Once the included Compose application is loaded, all resources definitions are copied into the 
current Compose application model. Compose displays a warning if resource names conflict and doesn't 
try to merge them. To enforce this, <code>include</code> is evaluated after the Compose file(s) selected 
to define the Compose application model have been parsed and merged, so that conflicts 
between Compose files are detected.</p>
<p><code>include</code> applies recursively so an included Compose file which declares its own <code>include</code> section, triggers those other files to be included as well. </p>
<p>Any volumes, networks, or other resources pulled in from the included Compose file can be used by the current Compose application for cross-service references. For example:</p>
<pre><code class="language-yaml">include:
  - my-compose-include.yaml  #with serviceB declared
services:
  serviceA:
    build: .
    depends_on:
      - serviceB #use serviceB directly as if it was declared in this Compose file
</code></pre>
<p>Compose also supports the use of interpolated variables with <code>include</code>. It's recommended that you <a href="12-interpolation.md">specify mandatory variables</a>. For example:</p>
<pre><code class="language-text">include:
  -${INCLUDE_PATH:?FOO}/compose.yaml
</code></pre>
<h3 id="short-syntax_6">Short syntax</h3>
<p>The short syntax only defines paths to other Compose files. The file is loaded with the parent
folder as the project directory, and an optional <code>.env</code> file that is loaded to define any variables' default values
by interpolation. The local project's environment can override those values. </p>
<pre><code class="language-yaml">include:
  - ../commons/compose.yaml
  - ../another_domain/compose.yaml

services:
  webapp:
    depends_on:
      - included-service ## defined by another_domain
</code></pre>
<p>In the above example, both <code>../commons/compose.yaml</code> and 
<code>../another_domain/compose.yaml</code> are loaded as individual Compose projects. Relative paths 
in Compose files being referred by <code>include</code> are resolved relative to their own Compose 
file path, not based on the local project's directory. Variables are interpolated using values set in the optional
<code>.env</code> file in same folder, and is overridden by the local project's environment.</p>
<h3 id="long-syntax_6">Long syntax</h3>
<p>The long syntax offers more control over the sub-project parsing:</p>
<pre><code class="language-yaml">include:
   - path: ../commons/compose.yaml
     project_directory: ..
     env_file: ../another/.env
</code></pre>
<h4 id="path">path</h4>
<p><code>path</code> is required and defines the location of the Compose file(s) to be parsed and included into the
local Compose model. <code>path</code> can be set either to a string when a single Compose file is involved,
or to a list of strings when multiple Compose files need to be <a href="13-merge.md">merged together</a> to
define the Compose model to be included in the local application.</p>
<pre><code class="language-yaml">include:
   - path: 
       - ../commons/compose.yaml
       - ./commons-override.yaml
</code></pre>
<h4 id="project_directory">project_directory</h4>
<p><code>project_directory</code> defines a base path to resolve relative paths set in the Compose file. It defaults to 
the directory of the included Compose file.</p>
<h4 id="env_file_1">env_file</h4>
<p><code>env_file</code> defines an environment file(s) to use to define default values when interpolating variables
in the Compose file being parsed. It defaults to <code>.env</code> file in the <code>project_directory</code> for the Compose 
file being parsed. </p>
<p><code>env_file</code> can be set either to a string or a list of strings when multiple environment files need to be merged
to define a project environment.</p>
<pre><code class="language-yaml">include:
   - path: ../another/compose.yaml
     env_file:
       - ../another/.env
       - ../another/dev.env
</code></pre>
<p>The local project's environment has precedence over the values set by the Compose file, so that the local project can
override values for customization.</p>
<h2 id="profiles_1">Profiles</h2>
<p>With profiles you can define a set of active profiles so your Compose application model is adjusted for various usages and environments.
The exact mechanism is implementation specific and may include command line flags, environment variables, etc.</p>
<p>The <a href="05-services.md">services</a> top-level element supports a <code>profiles</code> attribute to define a list of named profiles. 
Services without a <code>profiles</code> attribute are always enabled. </p>
<p>A service is ignored by Compose when none of the listed <code>profiles</code> match the active ones, unless the service is
explicitly targeted by a command. In that case its profile is added to the set of active profiles.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>All other top-level elements are not affected by <code>profiles</code> and are always active.</p>
</blockquote>
<p>References to other services (by <code>links</code>, <code>extends</code> or shared resource syntax <code>service:xxx</code>) do not
automatically enable a component that would otherwise have been ignored by active profiles. Instead
Compose returns an error.</p>
<h3 id="illustrative-example_1">Illustrative example</h3>
<pre><code class="language-yaml">services:
  foo:
    image: foo
  bar:
    image: bar
    profiles:
      - test
  baz:
    image: baz
    depends_on:
      - bar
    profiles:
      - test
  zot:
    image: zot
    depends_on:
      - bar
    profiles:
      - debug
</code></pre>
<p>In the above example:</p>
<ul>
<li>If the Compose application model is parsed with no profile enabled, it only contains the <code>foo</code> service.</li>
<li>If the profile <code>test</code> is enabled, the model contains the services <code>bar</code> and <code>baz</code>, and service <code>foo</code>, which is always enabled.</li>
<li>If the profile <code>debug</code> is enabled, the model contains both <code>foo</code> and <code>zot</code> services, but not <code>bar</code> and <code>baz</code>,
  and as such the model is invalid regarding the <code>depends_on</code> constraint of <code>zot</code>.</li>
<li>If the profiles <code>debug</code> and <code>test</code> are enabled, the model contains all services; <code>foo</code>, <code>bar</code>, <code>baz</code> and <code>zot</code>.</li>
<li>If Compose is executed with <code>bar</code> as the explicit service to run, <code>bar</code> and the <code>test</code> profile
  are active even if <code>test</code> profile is not enabled.</li>
<li>If Compose is executed with <code>baz</code> as the explicit service to run, the service <code>baz</code> and the
  profile <code>test</code> are active and <code>bar</code> is pulled in by the <code>depends_on</code> constraint.</li>
<li>If Compose is executed with <code>zot</code> as the explicit service to run, again the model is
  invalid regarding the <code>depends_on</code> constraint of <code>zot</code>, since <code>zot</code> and <code>bar</code> have no common <code>profiles</code>
  listed.</li>
<li>If Compose is executed with <code>zot</code> as the explicit service to run and profile <code>test</code> is enabled,
  profile <code>debug</code> is automatically enabled and service <code>bar</code> is pulled in as a dependency starting both
  services <code>zot</code> and <code>bar</code>.</li>
</ul>
<p>See how you can use <code>profiles</code> in <a href="https://docs.docker.com/compose/profiles/">Docker Compose</a>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../sway/" class="btn btn-neutral float-left" title="sway"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../mqtt/" class="btn btn-neutral float-right" title="mqtt">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../sway/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../mqtt/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
